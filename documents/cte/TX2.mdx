# 📑 Documentação TX2 – CTeOS

## 🔹 Visão Geral

O formato TX2 é utilizado para integração com sistemas de emissão de CTeOS (Conhecimento de Transporte Eletrônico - Outros Serviços). Este documento apresenta o dicionário de dados completo com todos os campos necessários para a geração correta dos arquivos de integração.

## 🔹 Estrutura do Dicionário de Dados

O dicionário de dados é uma tabela com os campos e informações sobre cada campo. Cada coluna tem uma função específica:

| Coluna | Função |
|--------|--------|
| **TAG** | Mostra o campo exato que deve ser utilizado no arquivo de integração |
| **Descrição** | Enumera as características próprias de cada campo |
| **Ocorrência** | Indica a obrigatoriedade do campo (formato X-Y, onde X é a quantidade mínima e Y é a máxima) |
| **Tamanho** | Limita a quantidade de caracteres de cada campo |
| **Observação** | Mostra informações adicionais que podem auxiliar no preenchimento |

### 📋 Convenções de Ocorrência
- **🟢 Obrigatório (1x)**: Campo obrigatório que deve aparecer exatamente uma vez
- **🟡 Opcional (0-1x)**: Campo opcional que pode aparecer no máximo uma vez
- **🔴 Obrigatório (1-Nx)**: Campo obrigatório que pode aparecer uma ou mais vezes
- **⚪ Opcional (0-Nx)**: Campo opcional que pode aparecer zero ou mais vezes

### 📏 Convenções de Tamanho
- **X-Y**: Mínimo X e máximo Y caracteres
- **X**: Exatamente X caracteres
- **XvY**: X casas antes da vírgula, vírgula, Y casas depois (para números decimais)

---

## 🔹 Estrutura Básica e Comandos

### Iniciando e Finalizando Arquivos
Para indicar o início e fim dos dados do conhecimento de transporte, utilize:
- **`incluirCTeOS`**: No início da inclusão dos campos
- **`salvarCTeOS`**: No final da inclusão dos campos

### Grupos Específicos
Para grupos específicos como modal rodoviário, utilize:
- **`IncluirRodoos`**: No início do modal rodoviário
- **`SalvarRodoos`**: No final do modal rodoviário
- **`incluirCTeComp`**: No início de CT-e complementado
- **`salvarCTeComp`**: No final de CT-e complementado

---

## 🔹 Dicionário de Dados Completo

### 📋 Estrutura Genérica

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `versao_1` | Versão do leiaute | 🟢 Obrigatório (1x) | - | Ex: "4.00" |
| `infCTe` | Informações do CT-e Outros Serviços | 🟢 Obrigatório (1x) | - | - |
| `versao_3` | Versão do leiaute | 🟢 Obrigatório (1x) | - | Ex: "4.00" |
| `id_4` | Identificador da tag a ser assinada | 🟢 Obrigatório (1x) | 47 | Informar a chave de acesso do CT-e OS precedida do literal "CTe" |

### 🆔 Identificação do CT-e

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `cUF_6` | Código da UF do emitente do CT-e | 🟢 Obrigatório (1x) | 2 | Utilizar a Tabela do IBGE |
| `cCT_7` | Código numérico que compõe a Chave de Acesso | 🟢 Obrigatório (1x) | 8 | Número aleatório gerado pelo emitente |
| `CFOP_8` | Código Fiscal de Operações e Prestações | 🟢 Obrigatório (1x) | 4 | - |
| `natOp_9` | Natureza da Operação | 🟢 Obrigatório (1x) | 1-60 | - |
| `mod_10` | Modelo do documento fiscal | 🟢 Obrigatório (1x) | 2 | Utilizar código 67 para CT-e OS |
| `serie_11` | Série do CT-e OS | 🟢 Obrigatório (1x) | 1-3 | Preencher com "0" no caso de série única |
| `nCT_12` | Número do CT-e OS | 🟢 Obrigatório (1x) | 1-9 | - |
| `dhEmi_13` | Data e hora de emissão do CT-e OS | 🟢 Obrigatório (1x) | 21 | Formato AAAA-MM-DDTHH:MM:DD TZD |
| `tpImp_14` | Formato de impressão do DACTE OS | 🟢 Obrigatório (1x) | 1 | 1=Retrato, 2=Paisagem |
| `tpEmis_15` | Forma de emissão do CT-e OS | 🟢 Obrigatório (1x) | 1 | 1=Normal, 5=Contingência FSDA, 7=SVC-RS, 8=SVC-SP |
| `cDV_16` | Dígito Verificador da chave de acesso | 🟢 Obrigatório (1x) | 1 | Calculado com algoritmo módulo 11 |
| `tpAmb_17` | Tipo do Ambiente | 🟢 Obrigatório (1x) | 1 | 1=Produção, 2=Homologação |
| `tpCTe_18` | Tipo do CT-e OS | 🟢 Obrigatório (1x) | 1 | 0=Normal, 1=Complementar, 3=Substituição |
| `procEmi_19` | Identificador do processo de emissão | 🟢 Obrigatório (1x) | 1 | 0=Aplicativo do contribuinte, 3=Aplicativo do Fisco |
| `verProc_20` | Versão do processo de emissão | 🟢 Obrigatório (1x) | 1-20 | Versão do aplicativo emissor |

### 📍 Local de Emissão e Serviço

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `cMunEnv_21` | Código do Município de envio | 🟢 Obrigatório (1x) | 7 | Utilizar tabela IBGE, 9999999 para exterior |
| `xMunEnv_22` | Nome do Município de envio | 🟢 Obrigatório (1x) | 2-60 | PAIS/Município para operações com exterior |
| `UFEnv_23` | Sigla da UF de envio | 🟢 Obrigatório (1x) | 2 | 'EX' para operações com exterior |
| `modal_24` | Modal do CT-e OS | 🟢 Obrigatório (1x) | 2 | 01=Rodoviário |
| `tpServ_25` | Tipo do Serviço | 🟢 Obrigatório (1x) | 1 | 6=Transporte de Pessoas, 7=Transporte de Valores, 8=Excesso de Bagagem |
| `indIEToma_26` | Indicador da IE do tomador | 🟢 Obrigatório (1x) | 1 | 1=Contribuinte ICMS, 2=Isento, 9=Não Contribuinte |
| `cMunIni_27` | Código do Município de início da prestação | 🟡 Opcional (0-1x) | 7 | Utilizar tabela IBGE, 9999999 para exterior |
| `xMunIni_28` | Nome do município de início | 🟡 Opcional (0-1x) | 2-60 | 'EXTERIOR' para operações com exterior |
| `UFIni_29` | UF do início da prestação | 🟡 Opcional (0-1x) | 2 | 'EX' para operações com exterior |
| `cMunFim_30` | Código do Município de término | 🟡 Opcional (0-1x) | 7 | Utilizar tabela IBGE, 9999999 para exterior |
| `xMunFim_31` | Nome do município de término | 🟡 Opcional (0-1x) | 2-60 | 'EXTERIOR' para operações com exterior |
| `UFFim_32` | UF do término da prestação | 🟡 Opcional (0-1x) | 2 | 'EX' para operações com exterior |

### 🚛 Informações do Percurso

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `UFPer_34` | Sigla das UFs do percurso | 🟢 Obrigatório (1x) | 2 | Não repetir UFs de início e fim |
| `dhCont_35` | Data e Hora da entrada em contingência | 🟢 Obrigatório (1x) | 21 | Formato AAAAMM-DDTHH:MM:SS |
| `xJust_36` | Justificativa da entrada em contingência | 🟢 Obrigatório (1x) | 15-256 | - |

### 🏛️ Compras Governamentais (NT 2025.001)

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `tpEnteGov_1541` | Tipo de Ente | 🟢 Obrigatório (1x) | 1 | 1=União, 2=Estados, 3=DF, 4=Municípios |
| `pRedutor_1542` | Percentual de redução de alíquota | 🟢 Obrigatório (1x) | 3v2-4 | Conforme LC 214/25 |

### 📝 Dados Complementares

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `xCaracAd_38` | Característica adicional do transporte | 🟡 Opcional (0-1x) | 1-15 | REENTREGA, DEVOLUÇÃO, REFATURAMENTO, etc |
| `xCaracSer_39` | Característica adicional do serviço | 🟡 Opcional (0-1x) | 1-30 | ENTREGA EXPRESSA, LOGÍSTICA REVERSA, etc |
| `xEmi_40` | Funcionário emissor do CT-e OS | 🟡 Opcional (0-1x) | 1-20 | - |
| `xObs_41` | Observações Gerais | 🟡 Opcional (0-1x) | 1-2000 | - |

### 📋 Campos de Uso Livre

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `xCampo_43` | Identificação do campo | 🟢 Obrigatório (1x) | 1-20 | - |
| `xTexto_44` | Conteúdo do campo | 🟢 Obrigatório (1x) | 1-160 | - |
| `xCampo_46` | Identificação do campo (Fisco) | 🟢 Obrigatório (1x) | 1-20 | - |
| `xTexto_47` | Conteúdo do campo (Fisco) | 🟢 Obrigatório (1x) | 1-160 | - |

### 🏢 Emitente (Prestador do Serviço)

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CNPJ_49` | CNPJ do emitente | 🟢 Obrigatório (1x) | 14 | Informar zeros não significativos |
| `IE_50` | Inscrição Estadual do emitente | 🟢 Obrigatório (1x) | 14 | - |
| `IEST_51` | IE do Substituto Tributário | 🟡 Opcional (0-1x) | 14 | - |
| `xNome_52` | Razão social ou Nome do emitente | 🟢 Obrigatório (1x) | 2-60 | - |
| `xFant_53` | Nome fantasia | 🟡 Opcional (0-1x) | 2-60 | - |

#### 📍 Endereço do Emitente

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `xLgr_55` | Logradouro | 🟢 Obrigatório (1x) | 2-60 | - |
| `nro_56` | Número | 🟢 Obrigatório (1x) | 1-60 | - |
| `xCpl_57` | Complemento | 🟡 Opcional (0-1x) | 1-60 | - |
| `xBairro_58` | Bairro | 🟢 Obrigatório (1x) | 2-60 | - |
| `cMun_59` | Código do município | 🟢 Obrigatório (1x) | 7 | Utilizar tabela IBGE |
| `xMun_60` | Nome do município | 🟢 Obrigatório (1x) | 2-60 | - |
| `CEP_61` | CEP | 🟡 Opcional (0-1x) | 8 | Informar zeros não significativos |
| `UF_62` | Sigla da UF | 🟢 Obrigatório (1x) | 2 | - |
| `fone_63` | Telefone | 🟡 Opcional (0-1x) | 6-14 | - |
| `CRT_1573` | Código de Regime Tributário | 🟢 Obrigatório (1x) | 1 | 1=Simples Nacional, 2=Simples excesso, 3=Regime Normal |

### 👤 Tomador do Serviço

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CNPJ_65` | Número do CNPJ | 🟢 Obrigatório (1x) | 14 | Zeros para empresa não estabelecida no Brasil |
| `CPF_66` | Número do CPF | 🟢 Obrigatório (1x) | 11 | Informar zeros não significativos |
| `IE_67` | Inscrição Estadual | 🟡 Opcional (0-1x) | 14 | IE do remetente ou ISENTO |
| `xNome_68` | Razão social ou nome do tomador | 🟢 Obrigatório (1x) | 2-60 | - |
| `xFant_69` | Nome fantasia | 🟡 Opcional (0-1x) | 2-60 | - |
| `fone_70` | Telefone | 🟡 Opcional (0-1x) | 6-14 | - |

#### 📍 Endereço do Tomador

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `xLgr_72` | Logradouro | 🟢 Obrigatório (1x) | 2-255 | - |
| `nro_73` | Número | 🟢 Obrigatório (1x) | 1-60 | - |
| `xCpl_74` | Complemento | 🟡 Opcional (0-1x) | 1-60 | - |
| `xBairro_75` | Bairro | 🟢 Obrigatório (1x) | 2-60 | - |
| `cMun_76` | Código do município | 🟢 Obrigatório (1x) | 7 | Utilizar tabela IBGE, 9999999 para exterior |
| `xMun_77` | Nome do município | 🟢 Obrigatório (1x) | 2-60 | 'EXTERIOR' para operações com exterior |
| `CEP_78` | CEP | 🟡 Opcional (0-1x) | 8 | Informar zeros não significativos |
| `UF_79` | Sigla da UF | 🟢 Obrigatório (1x) | 2 | 'EX' para operações com exterior |
| `cPais_80` | Código do país | 🟡 Opcional (0-1x) | 1-4 | Utilizar tabela BACEN |
| `xPais_81` | Nome do país | 🟡 Opcional (0-1x) | 2-60 | - |
| `email_82` | Endereço de e-mail | 🟡 Opcional (0-1x) | 1-60 | - |

### 💰 Valores da Prestação

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `vTPrest_84` | Valor Total da prestação | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vRec_85` | Valor a Receber | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

#### 🔧 Componentes da Prestação

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `xNome_87` | Nome do componente | 🟢 Obrigatório (1x) | 1-15 | FRETE PESO, FRETE VALOR, SEC/CAT, etc |
| `vComp_88` | Valor do componente | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

### 🏛️ Impostos

#### 💸 ICMS

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_92` | Classificação tributária | 🟢 Obrigatório (1x) | 2 | 00=tributação normal ICMS |
| `vBC_93` | Valor da BC do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `pICMS_94` | Alíquota do ICMS | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vICMS_95` | Valor do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

#### 💰 ICMS com Redução de BC

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_175` | Classificação tributária | 🟢 Obrigatório (1x) | 2 | 20=tributação com BC reduzida |
| `pRedBC_176` | Percentual de redução da BC | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vBC_177` | Valor da BC do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `pICMS_178` | Alíquota do ICMS | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vICMS_179` | Valor do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vICMSDeson_174` | Valor do ICMS de desoneração | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `cBenef_180` | Código de Benefício Fiscal na UF | 🟡 Opcional (0-1x) | 10 | - |

#### 🚫 ICMS Isento/Não Tributado/Diferido

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_97` | Classificação Tributária | 🟢 Obrigatório (1x) | 2 | 40=isenção, 41=não tributada, 51=diferido |
| `vICMSDeson_181` | Valor do ICMS de desoneração | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `cBenef_182` | Código de Benefício Fiscal na UF | 🟡 Opcional (0-1x) | 10 | - |

#### 🔄 ICMS Outros

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_99` | Classificação tributária | 🟢 Obrigatório (1x) | 2 | 90=ICMS outros |
| `pRedBC_100` | Percentual de redução da BC | 🟡 Opcional (0-1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vBC_101` | Valor da BC do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `pICMS_102` | Alíquota do ICMS | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `VICMS_103` | Valor do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vCred_104` | Valor do Crédito outorgado/Presumido | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vICMSDeson_183` | Valor do ICMS de desoneração | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `cBenef_184` | Código de Benefício Fiscal na UF | 🟡 Opcional (0-1x) | 10 | - |

#### 🌍 ICMS Outra UF

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_106` | Classificação Tributária | 🟢 Obrigatório (1x) | 2 | 90=ICMS Outra UF |
| `pRedBCOutraUF_107` | Percentual de redução da BC | 🟡 Opcional (0-1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vBCOutraUF_108` | Valor da BC do ICMS | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `pICMSOutraUF_109` | Alíquota do ICMS | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vICMSOutraUF_110` | Valor do ICMS devido outra UF | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vICMSDeson_185` | Valor do ICMS de desoneração | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `cBenef_186` | Código de Benefício Fiscal na UF | 🟡 Opcional (0-1x) | 10 | - |

#### 🏢 Simples Nacional

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_112` | Classificação Tributária | 🟢 Obrigatório (1x) | 2 | 90=ICMS Simples Nacional |
| `indSN_113` | Indica se é Simples Nacional | 🟢 Obrigatório (1x) | 1 | 1=Sim |
| `vTotTrib_114` | Valor Total dos Tributos | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `infAdFisco_115` | Informações adicionais de interesse do Fisco | 🟡 Opcional (0-1x) | 1-2000 | Norma referenciada, informações complementares |

#### 🎯 ICMS UF Fim (Partilha)

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `vBCUFFim_117` | Valor da BC do ICMS na UF de término | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `pFCPUFFim_118` | Percentual do ICMS relativo ao FCP | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `pICMSUFFim_119` | Alíquota interna da UF de término | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `pICMSInter_120` | Alíquota interestadual das UFs envolvidas | 🟢 Obrigatório (1x) | 3,2 | 5 posições (3 inteiras + 2 decimais) |
| `vFCPUFFim_122` | Valor do ICMS relativo ao FCP | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vICMSUFFim_123` | Valor do ICMS de partilha para UF de término | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vICMSUFIni_124` | Valor do ICMS de partilha para UF de início | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

### 🏛️ Tributos Federais

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `vPIS_126` | Valor do PIS | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vCOFINS_127` | Valor COFINS | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vIR_128` | Valor de Imposto de Renda | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vINSS_129` | Valor do INSS | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vCSLL_130` | Valor do CSLL | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

### 🆕 IBS/CBS (NT 2025.001 - Reforma Tributária)

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CST_1501` | Código da Situação Tributária do IBS/CBS | 🟢 Obrigatório (1x) | 3 | - |
| `cClassTrib_1502` | Código da Classificação Tributária do IBS/CBS | 🟢 Obrigatório (1x) | 6 | - |
| `vBC_1503` | Valor da Base de cálculo comum a IBS/CBS | 🟢 Obrigatório (1x) | 13,2 | - |
| `vIBS_1550` | Valor do IBS (soma de vIBSUF e vIBSMun) | 🟢 Obrigatório (1x) | 13,2 | - |

#### 🏛️ IBS/CBS de Competência das UFs

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `pIBSUF_1504` | Alíquota do IBS Estadual | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `pDif_1505` | Percentual de diferimento | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `vDif_1506` | Valor do diferimento | 🟢 Obrigatório (1x) | 13,2 | - |
| `vDevTrib_1507` | Valor do tributo devolvido | 🟢 Obrigatório (1x) | 13,2 | - |
| `pRedAliq_1508` | Percentual da redução de Alíquota | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `pAliqEfet_1509` | Alíquota efetiva do IBS da UF | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `vIBSUF_1510` | Valor do IBS de competência da UF | 🟢 Obrigatório (1x) | 13,2 | - |

#### 🏘️ IBS/CBS de Competência do Município

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `pIBSMun_1511` | Alíquota do IBS Municipal | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `pDif_1512` | Percentual de diferimento | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `vDif_1513` | Valor do diferimento | 🟢 Obrigatório (1x) | 13,2 | - |
| `vDevTrib_1514` | Valor do tributo devolvido | 🟢 Obrigatório (1x) | 13,2 | - |
| `pRedAliq_1515` | Percentual da redução de Alíquota | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `pAliqEfet_1516` | Alíquota efetiva do IBS do município | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `vIBSMun_1517` | Valor do IBS de competência do município | 🟢 Obrigatório (1x) | 13,2 | - |

#### 🏛️ CBS (Contribuição sobre Bens e Serviços)

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `pCBS_1518` | Alíquota da CBS | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `pDif_1519` | Percentual de diferimento | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `vDif_1520` | Valor do diferimento | 🟢 Obrigatório (1x) | 13,2 | - |
| `vDevTrib_1521` | Valor da CBS devolvida | 🟢 Obrigatório (1x) | 13,2 | - |
| `pRedAliq_1522` | Percentual da redução de Alíquota | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `pAliqEfet_1523` | Alíquota efetiva da CBS | 🟢 Obrigatório (1x) | 3,2/3,4 | - |
| `vCBS_1524` | Valor da CBS | 🟢 Obrigatório (1x) | 13,2 | - |

### 📋 Informações do Serviço

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `xDescServ_133` | Descrição do Serviço prestado | 🟢 Obrigatório (1x) | 1-30 | - |
| `qCarga_135` | Quantidade | 🟢 Obrigatório (1x) | 11,4 | 15 posições (11 inteiras + 4 decimais) |

### 📄 Documentos Referenciados

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `nDoc_137` | Número | 🟢 Obrigatório (1x) | 1-20 | - |
| `serie_138` | Série | 🟡 Opcional (0-1x) | 1-3 | - |
| `subserie_139` | Subsérie | 🟡 Opcional (0-1x) | 1-3 | - |
| `dEmi_140` | Data de Emissão | 🟢 Obrigatório (1x) | 10 | Formato AAAA-MM-DD |
| `vDoc_141` | Valor Transportado | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

### 🛡️ Seguro da Carga

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `respSeg_143` | Responsável pelo seguro | 🟢 Obrigatório (1x) | 1 | 4=Emitente, 5=Tomador |
| `xSeg_144` | Nome da Seguradora | 🟡 Opcional (0-1x) | 1-30 | - |
| `nApol_145` | Número da Apólice | 🟡 Opcional (0-1x) | 1-20 | Obrigatório pela lei 11.442/07 (RCTRC) |

### 🚛 Informações do Modal

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `versaoModal_147` | Versão do leiaute específico para o Modal | 🟢 Obrigatório (1x) | 4 | - |

### 🔄 CT-e de Substituição

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `chCTe_150` | Chave de acesso do CT-e OS a ser substituído | 🟢 Obrigatório (1x) | 44 | - |

### 📋 CT-e Complementado

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `chCTe_165` | Chave do CT-e OS complementado | 🟢 Obrigatório (1x) | 44 | - |

### 👥 Autorizados para Download

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CNPJ_170` | CNPJ do autorizado | 🟢 Obrigatório (1x) | 14 | Informar zeros não significativos |
| `CPF_171` | CPF do autorizado | 🟢 Obrigatório (1x) | 11 | Informar zeros não significativos |

### 💳 Dados da Cobrança

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `nFat_300` | Número da fatura | 🟡 Opcional (0-1x) | 1-60 | - |
| `vOrig_301` | Valor original da fatura | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vDesc_302` | Valor do desconto da fatura | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `vLiq_303` | Valor líquido da fatura | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

### 📦 GTV-e Relacionadas

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `chCTe_541` | Chave de acesso da GTVe | 🟢 Obrigatório (1x) | 44 | - |
| `tpComp_542` | Tipo do Componente | 🟢 Obrigatório (1x) | 1 | 1=Custódia, 2=Embarque, 3=Tempo espera, 4=Malote, 5=Ad Valorem, 6=Outros |
| `vComp_543` | Valor do componente | 🟢 Obrigatório (1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |
| `xComp_544` | Nome do componente | 🟡 Opcional (0-1x) | 0-15 | Apenas para tipo "Outros" |

### 📄 Duplicatas

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `nDup_304` | Número da duplicata | 🟡 Opcional (0-1x) | 1-60 | - |
| `dVenc_305` | Data de Vencimento | 🟡 Opcional (0-1x) | 10 | Formato AAAA-MM-DD |
| `vDup_306` | Valor da duplicata | 🟡 Opcional (0-1x) | 13,2 | 15 posições (13 inteiras + 2 decimais) |

### 👨‍💻 Responsável Técnico

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CNPJ_471` | CNPJ da pessoa jurídica desenvolvedora | 🟢 Obrigatório (1x) | 14 | - |
| `xContato_472` | Nome da pessoa a ser contatada | 🟢 Obrigatório (1x) | 14 | - |
| `email_473` | E-mail para contato | 🟢 Obrigatório (1x) | 14 | - |
| `fone_474` | Telefone para contato | 🟢 Obrigatório (1x) | 14 | DDD + número |
| `idCSRT_475` | Identificador do código de segurança | 🟢 Obrigatório (1x) | 14 | - |
| `hashCSRT_476` | Hash do token do código de segurança | 🟢 Obrigatório (1x) | 14 | SHA-1 + base64 do token CSRT + chave de acesso |

---

## 🚛 Modal Rodoviário (RodoOS)

### 📋 Informações Gerais

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `TAF_2` | Termo de Autorização de Fretamento | 🟢 Obrigatório (1x) | 12 | Resolução ANTT nº 4.777/2015 |
| `NroRegEstadual_3` | Número do Registro Estadual | 🟢 Obrigatório (1x) | 25 | Registro junto à Administração Estadual |

### 🚗 Dados do Veículo

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `placa_5` | Placa do veículo | 🟢 Obrigatório (1x) | 4 | - |
| `RENAVAM_6` | RENAVAM do veículo | 🟡 Opcional (0-1x) | 9-11 | - |

### 👤 Proprietários do Veículo

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `CPF_8` | Número do CPF | 🟢 Obrigatório (1x) | 11 | Informar zeros não significativos |
| `CNPJ_9` | Número do CNPJ | 🟢 Obrigatório (1x) | 14 | Informar zeros não significativos |
| `TAF_10` | Termo de Autorização de Fretamento | 🟢 Obrigatório (1x) | 12 | Resolução ANTT nº 4.777/2015 |
| `NroRegEstadual_11` | Número do Registro Estadual | 🟢 Obrigatório (1x) | 25 | Registro obrigatório junto à ANTT |
| `xNome_12` | Razão Social ou Nome do proprietário | 🟢 Obrigatório (1x) | 2-60 | - |
| `IE_13` | Inscrição Estadual | 🟢 Obrigatório (1x) | 0-14 | - |
| `UF_14` | UF | 🟢 Obrigatório (1x) | 2 | - |
| `tpProp_15` | Tipo Proprietário | 🟢 Obrigatório (1x) | 1 | 0=TAC Agregado, 1=TAC Independente, 2=Outros |
| `UF_16` | UF em que veículo está licenciado | 🟢 Obrigatório (1x) | 2 | Sigla da UF de licenciamento |

### 🚌 Dados do Fretamento

| TAG | Descrição | Ocorrência | Tamanho | Observação |
|-----|-----------|------------|---------|------------|
| `tpFretamento_17` | Tipo do Fretamento de Pessoas | 🟢 Obrigatório (1x) | 2 | 1=Eventual, 2=Contínuo |
| `dhViagem_18` | Data e hora da viagem | 🟡 Opcional (0-1x) | 2 | Formato TMZ completo, apenas para fretamento eventual |

---

## 🔹 Comandos de Estrutura

### 📝 Comandos Principais
- `incluirCTeOS` - Início da inclusão de dados do CTeOS
- `salvarCTeOS` - Finalização da inclusão de dados do CTeOS

### 🔄 Grupos Específicos
- `IncluirRodoos` - Início do modal rodoviário
- `SalvarRodoos` - Finalização do modal rodoviário
- `incluirCTeComp` - Início de CT-e complementado
- `salvarCTeComp` - Finalização de CT-e complementado
- `incluirInfGTVe` - Início de informações GTV-e
- `salvarInfGTVe` - Finalização de informações GTV-e

### 📋 Formato dos Campos
- **Separador**: Usar `=` entre TAG e valor (ex: `cUF_6=35`)
- **Valores vazios**: Campos opcionais podem ficar vazios (ex: `placa_5=`)
- **Quebras de linha**: Cada campo deve estar em uma linha separada

---

## 🔹 Exemplo de Estrutura TX2 Válida

### 📋 Exemplo Real de CTeOS

```txt
formato=tx2
incluirCTeOS
cUF_6=35
cCT_7=79022057
CFOP_8=5932
natOp_9=Prestação de serviço de transporte dentro do estado de SP
mod_10=67
serie_11=001
nCT_12=000000002
dhEmi_13=2025-08-25T16:19:46-03:00
tpImp_14=1
tpEmis_15=1
cDV_16=0
tpAmb_17=1
tpCTe_18=0
procEmi_19=0
verProc_20=4.00
cMunEnv_21=3550308
xMunEnv_22=São Paulo
UFEnv_23=SP
modal_24=01
tpServ_25=6
indIEToma_26=1
cMunIni_27=3550308
xMunIni_28=São Paulo
UFIni_29=SP
cMunFim_30=3543402
xMunFim_31=Ribeirão Preto
UFFim_32=SP
xObs_41=Serviço de fretamento eventual. Número do pedido: 341 - Viagem realizada em São Paulo / SP - Ribeirão Preto / SP - 14/08/2025 12:37 - VALOR APROXIMADO DOS TRIBUTOS ▶
CNPJ_49=01274689000105
IE_50=712030582117
CRT_1573=1
IEST_51=110042490114
xNome_52=Viação Mimo Ltda
xFant_53=Viação Mimo
xLgr_55=Rua da Consolação
nro_56=349
xCpl_57=Sala 2
xBairro_58=Centro
cMun_59=3550308
xMun_60=São Paulo
CEP_61=01042000
UF_62=SP
fone_63=11971400280
CNPJ_65=19073578000287
CPF_66=
indIEToma_26=9
xNome_68=EGIZ EMPREENDIMENTOS EDUCACIONAIS LTDA
xFant_69=EGIZ EMPREENDIMENTOS EDUCACIONAIS LTDA
fone_70=
xLgr_72=Duque de Caxias
nro_73=S/N
xCpl_74=COLEGIO SER
xBairro_75=PARQUE CENTENÁRIO
cMun_76=3525904
xMun_77=Jundiaí
CEP_78=13214000
UF_79=SP
cPais_80=1058
xPais_81=BRASIL
email_82=cobranca@colegioserjundiai.com.br
vTPrest_84=2340.00
vRec_85=2340.00
CST_92=00
vBC_93=2340.00
pICMS_94=1.00
vICMS_95=23.40
vPIS_126=0.00
vCOFINS_127=0.00
vIR_128=0.00
vINSS_129=0.00
vCSLL_130=0.00
xDescServ_133=Transporte de Passageiros
qCarga_135=1
versaoModal_147=4.00
versao_3=4.00
Id_4=CTe35250801274689000105670010000000021790220570
versao_1=4.00
salvarCTeOS
IncluirRodoos
NroRegEstadual_3=0000000000000000000001851
placa_5=
RENAVAM_6=
tpFretamento_17=1
dhViagem_18=2025-10-21T07:00:00-03:00
SalvarRodoos
```

### 🔍 **Análise do Exemplo**

#### 📋 **Estrutura Básica**
- **Formato**: `formato=tx2` - Define o tipo de arquivo
- **Início**: `incluirCTeOS` - Comando de início
- **Fim**: `salvarCTeOS` - Comando de finalização

#### 🆔 **Identificação do CT-e**
- **UF**: `cUF_6=35` (São Paulo)
- **Código**: `cCT_7=79022057` (Código numérico)
- **CFOP**: `CFOP_8=5932` (Prestação de serviço de transporte)
- **Modelo**: `mod_10=67` (CTeOS)
- **Série**: `serie_11=001`
- **Número**: `nCT_12=000000002`
- **Data/Hora**: `dhEmi_13=2025-08-25T16:19:46-03:00`

#### 📍 **Local e Serviço**
- **Modal**: `modal_24=01` (Rodoviário)
- **Tipo Serviço**: `tpServ_25=6` (Transporte de Pessoas)
- **Município Início**: `cMunIni_27=3550308` (São Paulo)
- **Município Fim**: `cMunFim_30=3543402` (Ribeirão Preto)

#### 🏢 **Emitente (Viação Mimo Ltda)**
- **CNPJ**: `CNPJ_49=01274689000105`
- **IE**: `IE_50=712030582117`
- **Razão Social**: `xNome_52=Viação Mimo Ltda`
- **Endereço**: Rua da Consolação, 349, Sala 2, Centro, São Paulo/SP

#### 👤 **Tomador (EGIZ Empresas)**
- **CNPJ**: `CNPJ_65=19073578000287`
- **Razão Social**: `xNome_68=EGIZ EMPREENDIMENTOS EDUCACIONAIS LTDA`
- **Endereço**: Duque de Caxias, S/N, COLEGIO SER, PARQUE CENTENÁRIO, Jundiaí/SP

#### 💰 **Valores e Tributos**
- **Valor Total**: `vTPrest_84=2340.00`
- **Valor a Receber**: `vRec_85=2340.00`
- **ICMS CST**: `CST_92=00` (Tributação normal)
- **Base Cálculo**: `vBC_93=2340.00`
- **Alíquota ICMS**: `pICMS_94=1.00`
- **Valor ICMS**: `vICMS_95=23.40`

#### 🚛 **Modal Rodoviário**
- **Início**: `IncluirRodoos`
- **Registro Estadual**: `NroRegEstadual_3=0000000000000000000001851`
- **Tipo Fretamento**: `tpFretamento_17=1` (Eventual)
- **Data Viagem**: `dhViagem_18=2025-10-21T07:00:00-03:00`
- **Fim**: `SalvarRodoos`

### 📝 **Observações Importantes**

1. **Formato**: Usa `=` como separador (não `|`)
2. **Comandos**: `incluirCTeOS` e `salvarCTeOS` para o documento principal
3. **Grupos**: `IncluirRodoos` e `SalvarRodoos` para o modal rodoviário
4. **Campos Vazios**: Alguns campos como `placa_5=` e `RENAVAM_6=` podem ficar vazios
5. **Versões**: `versao_1=4.00`, `versao_3=4.00`, `versaoModal_147=4.00`
6. **ID**: `Id_4=CTe35250801274689000105670010000000021790220570` (chave de acesso completa)

---

## 🔹 Observações Importantes

1. **Formatação de Datas**: Utilizar formato ISO 8601 para campos de data/hora
2. **Valores Monetários**: Sempre utilizar 2 casas decimais
3. **CNPJ/CPF**: Informar zeros não significativos à esquerda
4. **Códigos IBGE**: Consultar tabelas oficiais para códigos de municípios e UFs
5. **Versões**: Manter compatibilidade com versões do schema XML
6. **Campos Opcionais**: Preencher apenas quando aplicável
7. **Validações**: Verificar regras de negócio antes da emissão

---

## 🔹 Recursos Adicionais

- **Tabelas de Apoio**: IBGE, BACEN, códigos de benefícios fiscais
- **Documentação Técnica**: Esquemas XML, notas técnicas
- **Validações**: Regras de negócio e validações técnicas
- **Suporte**: Contato com equipe técnica para dúvidas específicas
