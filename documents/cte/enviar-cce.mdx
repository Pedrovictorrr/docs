---
title: Enviar a CCe
description: Documentação da rota para envio de Carta de Correção (CCe) do CT-e OS
---

# Enviar a CCe

Aqui estaremos enviando uma carta de correção (CCe) de uma CT-e OS para a SEFAZ. A requisição é **síncrona**, ou seja, a resposta da requisição será diretamente a resposta da SEFAZ.

**Observação importante:** Novas cartas de correção substituem outras feitas anteriormente, então todas as correções desejadas devem ser mantidas na próxima CCe enviada.

## Endpoint

### POST

```http
POST https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/envia
```

## Headers

| Nome | Descrição | Exemplo |
|------|-----------|---------|
| `Content-Type` | Indica o tipo do arquivo | `application/x-www-form-urlencoded` |
| `Authorization` | Este usuário e senha são os seus dados para acessar como administrador em um grupo do SaaS | `Basic YWRtaW46MTIzbXVkYXI=` |

## Body Parameters

| Nome | Descrição |
|------|-----------|
| `Grupo` | Nome do grupo |
| `CNPJ` | CNPJ do emitente da CT-e OS, apenas números |
| `Arquivo` | Conteúdo do arquivo Tx2 |

## Campos do Tx2 da CCe

### Campos Obrigatórios

| Campo | Conteúdo | Obrigatório | Descrição |
|-------|----------|-------------|-----------|
| `documento` | `cce` | **Sim** | Identifica que é uma Carta de Correção |
| `chavenota` | Chave da nota que será feita a correção | **Sim** | Chave de acesso do CT-e OS (44 dígitos) |
| `dhEvento` | Data do evento (Formato: AAAA-MM-DDTHH:MM:SS) | **Sim** | Data e hora do evento de correção |
| `seqEvento` | Sequência do Evento (1-20) | **Sim** | Número sequencial do evento |
| `descEvento_1` | "Carta de Correção" ou "Carta de Correcao" | **Sim** | Descrição do evento |
| `xCondUso_2` | Texto da condição de uso | **Sim** | Condições de uso da carta de correção |

### Campos de Correção

| Campo | Conteúdo | Obrigatório | Descrição |
|-------|----------|-------------|-----------|
| `INCLUIRINFCORRECAO` | - | - | Marca o início da inclusão de correção |
| `grupoAlterado_3` | Informar o grupo que está sendo alterado | **Sim** | Grupo do campo que será corrigido |
| `campoAlterado_4` | Informar o campo que está sendo alterado | **Sim** | Nome do campo que será corrigido |
| `valorAlterado_5` | Informar o valor que está sendo alterado | **Sim** | Novo valor para o campo |
| `nroItemAlterado_6` | Número do item que está sendo alterado | **Não** | Número do item quando aplicável |
| `SALVARINFCORRECAO` | - | - | Marca o fim da inclusão de correção |

## Texto da Condição de Uso (xCondUso_2)

```
A Carta de Correcao e disciplinada pelo Art. 58-B do CONVENIO/SINIEF 06/89: 
Fica permitida a utilizacao de carta de correcao, para regularizacao de erro 
ocorrido na emissao de documentos fiscais relativos a prestacao de servico de 
transporte, desde que o erro nao esteja relacionado com: 
I - as variaveis que determinam o valor do imposto tais como: base de calculo, 
aliquota, diferenca de preco, quantidade, valor da prestacao;
II - a correcao de dados cadastrais que implique mudanca do emitente, tomador, 
remetente ou do destinatario;
III - a data de emissao ou de saida
```

## Exemplos de Uso

### Exemplo 1: Correção de Campo Simples

```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/envia" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=meugrupo&CNPJ=08187168000160&Arquivo=documento=cce&chavenota=41150408187168000160576660000006671000000012&dhEvento=2024-01-15T10:30:00&seqEvento=1&descEvento_1=Carta de Correção&xCondUso_2=A Carta de Correcao e disciplinada pelo Art. 58-B do CONVENIO/SINIEF 06/89...&INCLUIRINFCORRECAO&grupoAlterado_3=infCte&campoAlterado_4=xObs&valorAlterado_5=Observação corrigida&SALVARINFCORRECAO"
```

### Exemplo 2: Correção de Múltiplos Campos

```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/envia" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=meugrupo&CNPJ=08187168000160&Arquivo=documento=cce&chavenota=41150408187168000160576660000006671000000012&dhEvento=2024-01-15T10:30:00&seqEvento=1&descEvento_1=Carta de Correção&xCondUso_2=A Carta de Correcao e disciplinada pelo Art. 58-B do CONVENIO/SINIEF 06/89...&INCLUIRINFCORRECAO&grupoAlterado_3=infCte&campoAlterado_4=xObs&valorAlterado_5=Primeira correção&SALVARINFCORRECAO&INCLUIRINFCORRECAO&grupoAlterado_3=infCte&campoAlterado_4=xObs&valorAlterado_5=Segunda correção&SALVARINFCORRECAO"
```

## Respostas

### Exemplo de Retorno Autorizado

```text
"Situação", "Protocolo de autorização ou Chave da CT-e", "Chave da CT-e ou cStat (Código de status do retorno da Sefaz)", "Mensagem da Sefaz"

AUTORIZADA,143210000443482,43210804086596000145570000000000081000000020,135,Evento registrado e vinculado a CT-e
```

**Campos da resposta:**
- **Situação**: `AUTORIZADA`
- **Protocolo**: `143210000443482`
- **Chave da CT-e**: `43210804086596000145570000000000081000000020`
- **cStat**: `135`
- **Mensagem**: `Evento registrado e vinculado a CT-e`

### Exemplo de Retorno Rejeitado

```text
"Situação", "Protocolo de autorização ou Chave da CT-e", "Chave da CT-e ou cStat (Código de status do retorno da Sefaz)", "Mensagem da Sefaz"

REJEITADA,,43210804086596000145570000000000081000000020,631,Rejeição: Duplicidade de Evento
```

**Campos da resposta:**
- **Situação**: `REJEITADA`
- **Protocolo**: (vazio)
- **Chave da CT-e**: `43210804086596000145570000000000081000000020`
- **cStat**: `631`
- **Mensagem**: `Rejeição: Duplicidade de Evento`

## Códigos de Status (cStat)

### Códigos de Sucesso
- **135**: Evento registrado e vinculado a CT-e
- **136**: Evento registrado, aguardando processamento

### Códigos de Rejeição Comuns
- **630**: Falha no Schema específico para o evento
- **631**: Duplicidade de Evento
- **632**: CT-e não localizada
- **633**: CT-e não autorizada
- **634**: CT-e cancelada
- **635**: CT-e denegada

## Limitações e Restrições

### **Campos que NÃO podem ser corrigidos:**

1. **Valores do Imposto:**
   - Base de cálculo
   - Alíquota
   - Diferença de preço
   - Quantidade
   - Valor da prestação

2. **Dados Cadastrais:**
   - Emitente
   - Tomador
   - Remetente
   - Destinatário

3. **Datas:**
   - Data de emissão
   - Data de saída

### **Regras Importantes:**

1. **Sequência**: O `seqEvento` deve ser único e sequencial (1-20)
2. **Substituição**: Novas CCe substituem as anteriores
3. **Prazo**: Existe prazo limite para envio de correções
4. **Validação**: A SEFAZ valida se a correção é permitida

## Fluxo de Envio da CCe

```
CT-e OS Autorizado
        ↓
    Identificar Erro
        ↓
    Preparar Tx2 da CCe
        ↓
    Enviar para SEFAZ
        ↓
    Aguardar Resposta
        ↓
    Processar Retorno
        ↓
    CCe Vinculada ao CT-e
```

## Observações Importantes

1. **Requisitos**: CT-e OS deve estar autorizada
2. **Sequência**: Cada correção deve ter um número sequencial único
3. **Substituição**: Enviar nova CCe substitui as anteriores
4. **Validação**: SEFAZ valida se a correção é permitida
5. **Prazo**: Existe prazo limite para envio de correções
6. **Síncrono**: A resposta é imediata da SEFAZ

## Tratamento de Erros

### Erros Comuns

- **"Duplicidade de Evento"** - Verificar se o `seqEvento` não foi usado
- **"Falha no Schema"** - Verificar se o Tx2 está no formato correto
- **"CT-e não localizada"** - Verificar se a chave está correta
- **"CT-e não autorizada"** - Verificar se o CT-e está autorizado

### Validações

1. Verificar se o CT-e OS está autorizado
2. Confirmar se a correção é permitida
3. Validar o formato do Tx2
4. Verificar se o `seqEvento` é único
5. Confirmar se todos os campos obrigatórios estão preenchidos