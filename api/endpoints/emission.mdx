---
title: 'Endpoints de Emiss√£o'
description: 'Rotas da API para emiss√£o de documentos fiscais eletr√¥nicos'
---

# Endpoints de Emiss√£o - Manager SaaS API

A API do Manager SaaS permite comunica√ß√£o direta atrav√©s de requisi√ß√µes HTTPS para emiss√£o de todos os tipos de documentos fiscais eletr√¥nicos.

## Autentica√ß√£o

### **Certificado Digital**

Para realizar a assinatura das notas e documentos, √© **obrigat√≥rio** cadastrar o certificado digital modelo A1 no Manager SaaS.

<Note>
üîê **Importante**: O certificado digital √© essencial para a validade jur√≠dica dos documentos emitidos.
</Note>

### **Dados de Autentica√ß√£o**

Os dados de autentica√ß√£o para consumir a API s√£o os mesmos cadastrados na sua Conta do Manager SaaS:

- **Token de Acesso**: Gerado no dashboard do Manager SaaS
- **Empresa ID**: Identificador √∫nico da sua empresa
- **Ambiente**: Produ√ß√£o ou Homologa√ß√£o

## Base URL

```
https://api.managersaas.com/v1
```

## Headers Obrigat√≥rios

```http
Authorization: Bearer SEU_TOKEN_AQUI
Content-Type: application/json
User-Agent: SeuApp/1.0
```

## Endpoints de CT-e OS

### **Emiss√£o de CT-e OS**

```http
POST /cte/os/emitir
```

**Descri√ß√£o**: Emite um Conhecimento de Transporte Eletr√¥nico - Outros Servi√ßos.

**Corpo da Requisi√ß√£o**:
```json
{
  "tipo_documento": "CTE_OS",
  "emissor": {
    "cnpj": "12345678000199",
    "inscricao_estadual": "123456789",
    "razao_social": "TRANSPORTADORA EXEMPLO LTDA",
    "endereco": {
      "logradouro": "Rua das Flores, 123",
      "bairro": "Centro",
      "municipio": "S√£o Paulo",
      "uf": "SP",
      "cep": "01234-567"
    }
  },
  "tomador": {
    "cnpj": "98765432000188",
    "razao_social": "CLIENTE EXEMPLO LTDA",
    "endereco": {
      "logradouro": "Av. Paulista, 1000",
      "bairro": "Bela Vista",
      "municipio": "S√£o Paulo",
      "uf": "SP",
      "cep": "01310-100"
    }
  },
  "servico": {
    "descricao": "Transporte de carga geral",
    "valor_frete": 150.00,
    "valor_seguro": 25.00,
    "valor_despesas": 15.00,
    "valor_total": 190.00
  },
  "transporte": {
    "tipo_veiculo": "TRUCK",
    "placa": "ABC1234",
    "motorista": {
      "nome": "Jo√£o Silva",
      "cpf": "12345678901",
      "cnh": "12345678901"
    }
  }
}
```

**Resposta de Sucesso** (200):
```json
{
  "status": "success",
  "message": "CT-e OS emitido com sucesso",
  "data": {
    "numero": "123456",
    "chave_acesso": "35231234567890123456789012345678901234567890",
    "protocolo": "123456789012345",
    "data_emissao": "2024-01-15T10:30:00Z",
    "status": "AUTORIZADO",
    "xml_url": "https://api.managersaas.com/v1/cte/os/123456/xml",
    "pdf_url": "https://api.managersaas.com/v1/cte/os/123456/pdf"
  }
}
```

**Resposta de Erro** (400):
```json
{
  "status": "error",
  "message": "Dados inv√°lidos",
  "errors": [
    {
      "field": "emissor.cnpj",
      "message": "CNPJ inv√°lido"
    },
    {
      "field": "servico.valor_frete",
      "message": "Valor do frete deve ser maior que zero"
    }
  ]
}
```

### **Consulta de Status**

```http
GET /cte/os/{numero}/status
```

**Descri√ß√£o**: Consulta o status atual de um CT-e OS espec√≠fico.

**Par√¢metros de URL**:
- `numero`: N√∫mero do CT-e OS

**Resposta** (200):
```json
{
  "status": "success",
  "data": {
    "numero": "123456",
    "status": "AUTORIZADO",
    "data_emissao": "2024-01-15T10:30:00Z",
    "data_autorizacao": "2024-01-15T10:31:15Z",
    "protocolo": "123456789012345",
    "chave_acesso": "35231234567890123456789012345678901234567890"
  }
}
```

### **Consulta Avan√ßada de CT-e OS**

```http
GET /cteos/consulta
```

**Descri√ß√£o**: Consulta avan√ßada para buscar CT-e OS com filtros personalizados e campos espec√≠ficos.

**Headers Obrigat√≥rios**:
```http
Authorization: Basic YWRtaW46MTIzbXVkYXI=
Content-Type: application/json
```

**Par√¢metros de Query**:

| Par√¢metro | Tipo | Obrigat√≥rio | Descri√ß√£o | Exemplo |
|-----------|------|-------------|-----------|---------|
| `Grupo` | string | ‚úÖ | Nome do grupo | `Grupo=GRUPO_EMPRESA` |
| `CNPJ` | string | ‚úÖ | CNPJ do grupo (apenas n√∫meros) | `CNPJ=12345678000199` |
| `Filtro` | string | ‚ùå | Filtro da consulta | `Filtro=situacao=AUTORIZADA` |
| `Campos` | string | ‚úÖ | Campos a retornar (separados por v√≠rgula) | `Campos=chave,situacao,numero` |
| `Limite` | number | ‚ùå | Limite de registros (m√°x: 100) | `Limite=50` |
| `Ordem` | string | ‚ùå | Ordena√ß√£o dos resultados | `Ordem=dtemissao DESC` |
| `Visao` | string | ‚ùå | Tabela de consulta | `Visao=TspdCTeOSVWConsulta` |

**Exemplo de Requisi√ß√£o**:
```bash
curl -X GET "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/consulta?Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&Filtro=situacao=AUTORIZADA&Campos=chave,situacao,numero,dtemissao&Limite=50" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -H "Content-Type: application/json"
```

**Resposta de Sucesso**:
```
41150408187168000160576660000006671000000012, AUTORIZADA, 667, 15/01/2024 10:30:00
41150408187168000160576660000006672000000012, AUTORIZADA, 668, 15/01/2024 11:15:00
```

**Resposta de Erro**:
```
Nenhum registro encontrado.
```

**Campos Dispon√≠veis para Consulta**:

| Campo | Descri√ß√£o | Tipo |
|-------|-----------|------|
| `idintegracao` | N√∫mero do idintegra√ß√£o | number |
| `situacao` | Situa√ß√£o do CT-e OS | string |
| `numero` | N√∫mero do CT-e OS | number |
| `codct` | C√≥digo num√©rico da Chave de Acesso | string |
| `nprotenvio` | Protocolo de envio (15 d√≠gitos) | string |
| `nprotcanc` | Protocolo de cancelamento (15 d√≠gitos) | string |
| `nprotinutil` | Protocolo de inutiliza√ß√£o (15 d√≠gitos) | string |
| `modoentrada` | Modo de entrada (Normal,EPEC,FSDA,SVSRS,SVCSP) | string |
| `dtemissao` | Data de emiss√£o | datetime |
| `email` | E-mail do Tomador | string |
| `handle` | Handle √∫nico do registro | string |
| `chave` | Chave do CT-e OS (44 d√≠gitos) | string |
| `dtautorizacao` | Data de autoriza√ß√£o | datetime |
| `dtcancelamento` | Data de cancelamento | datetime |
| `cnpj` | CNPJ do Emitente | string |
| `idgrupo` | ID do grupo | number |
| `serie` | S√©rie do CT-e OS | string |
| `nomegrupo` | Nome do Grupo configurado | string |
| `docdestinatario` | CNPJ do Destinat√°rio | string |
| `eventos` | Quantidade de eventos recebidos | number |
| `origem` | Origem dos registros (1-4) | number |
| `tomador` | Papel do tomador (0-3) | number |
| `nomedestinatario` | Nome do Destinat√°rio | string |
| `xmlcteosautorizado` | XML autorizado do CT-e OS | text |
| `doctomador` | CNPJ do Tomador | string |
| `docremetente` | CNPJ do Remetente | string |
| `docexpedidor` | CNPJ do Expedidor | string |
| `docrecebedor` | CNPJ do Recebedor | string |
| `dtcadastro` | Data de cadastro no sistema | datetime |
| `ambiente` | Ambiente (1-Produ√ß√£o, 2-Homologa√ß√£o) | number |
| `impressora` | Nome da impressora padr√£o | string |
| `motivo` | Mensagem de autoriza√ß√£o/rejei√ß√£o | string |
| `cstat` | C√≥digo de status da SEFAZ | number |
| `sincronizadopm` | Sincroniza√ß√£o com PrintManager (0-1) | number |
| `impresso` | Status de impress√£o (Sim/N√£o) | string |
| `emailtomador` | E-mail do Tomador | string |
| `envemail` | Status do envio de e-mail (Sim/N√£o) | string |

**Exemplos de Filtros**:

#### **Consulta por Situa√ß√£o**
```
Filtro=situacao=AUTORIZADA
```

#### **Consulta por Data**
```
Filtro=dtautorizacao>=01/01/2024
```

#### **Consulta por CNPJ**
```
Filtro=cnpj=12345678000199
```

#### **Consulta M√∫ltipla**
```
Filtro=situacao=AUTORIZADA and dtemissao>=01/01/2024
```

#### **Consulta por Chave**
```
Filtro=chave=41150408187168000160576660000006671000000012
```

**Exemplos de Ordena√ß√£o**:

#### **Por Data de Emiss√£o (Decrescente)**
```
Ordem=dtemissao DESC
```

#### **Por N√∫mero (Crescente)**
```
Ordem=numero ASC
```

#### **Por Situa√ß√£o e Data**
```
Ordem=situacao ASC, dtemissao DESC
```

**Exemplos de Consultas Completas**:

#### **1. CT-e OS Autorizados do M√™s**
```bash
curl -X GET "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/consulta?Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&Filtro=situacao=AUTORIZADA and dtemissao>=01/01/2024&Campos=chave,situacao,numero,dtemissao,valor_total&Ordem=dtemissao DESC&Limite=100"
```

#### **2. CT-e OS por CNPJ do Tomador**
```bash
curl -X GET "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/consulta?Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&Filtro=doctomador=98765432000188&Campos=chave,situacao,numero,dtemissao,doctomador&Ordem=dtemissao DESC&Limite=50"
```

#### **3. CT-e OS Cancelados**
```bash
curl -X GET "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/consulta?Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&Filtro=situacao=CANCELADA&Campos=chave,situacao,numero,dtcancelamento,motivo&Ordem=dtcancelamento DESC&Limite=100"
```

#### **4. CT-e OS por S√©rie**
```bash
curl -X GET "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/consulta?Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&Filtro=serie=324&Campos=chave,situacao,numero,serie,dtemissao&Ordem=numero ASC&Limite=100"
```

**Tratamento de Erros**:

#### **Erro de Autentica√ß√£o (401)**
```
Unauthorized: Credenciais inv√°lidas
```

#### **Erro de Par√¢metros (400)**
```
Bad Request: Par√¢metros obrigat√≥rios n√£o informados
```

#### **Erro de Limite (400)**
```
Bad Request: Limite m√°ximo excedido (m√°ximo: 100)
```

#### **Erro de Filtro (400)**
```
Bad Request: Filtro inv√°lido
```

**Implementa√ß√£o em PHP**:

```php
<?php
function consultarCTeOS($params) {
    $queryString = http_build_query($params);
    $url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/consulta?{$queryString}";
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Basic YWRtaW46MTIzbXVkYXI=',
        'Content-Type: application/json'
    ]);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    
    $data = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode !== 200) {
        throw new Exception("HTTP error! status: " . $httpCode);
    }
    
    if ($data === 'Nenhum registro encontrado.') {
        return ['registros' => [], 'total' => 0];
    }
    
    // Parse da resposta em formato CSV
    $linhas = explode("\n", $data);
    $registros = [];
    
    foreach ($linhas as $linha) {
        $linha = trim($linha);
        if (!empty($linha)) {
            $campos = explode(', ', $linha);
            $registros[] = [
                'chave' => $campos[0],
                'situacao' => $campos[1],
                'numero' => $campos[2],
                'dtemissao' => $campos[3]
            ];
        }
    }
    
    return ['registros' => $registros, 'total' => count($registros)];
}

// Uso
$resultado = consultarCTeOS([
    'Grupo' => 'GRUPO_EMPRESA',
    'CNPJ' => '12345678000199',
    'Filtro' => 'situacao=AUTORIZADA',
    'Campos' => 'chave,situacao,numero,dtemissao',
    'Limite' => 50,
    'Ordem' => 'dtemissao DESC'
]);
```


    



        'Ordem' => 'dtemissao DESC'
    ]);
    
    print_r($resultado);
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}
```

### **Cancelamento**

```http
POST /cte/os/{numero}/cancelar
```

**Descri√ß√£o**: Cancela um CT-e OS autorizado.

**Par√¢metros de URL**:
- `numero`: N√∫mero do CT-e OS

**Corpo da Requisi√ß√£o**:
```json
{
  "justificativa": "Erro na digita√ß√£o dos dados"
}
```

**Resposta** (200):
```json
{
  "status": "success",
  "message": "CT-e OS cancelado com sucesso",
  "data": {
    "numero": "123456",
    "protocolo_cancelamento": "987654321098765",
    "data_cancelamento": "2024-01-15T11:00:00Z"
  }
}
```

### **Download de Arquivos**

#### **XML**
```http
GET /cte/os/{numero}/xml
```

#### **PDF**
```http
GET /cte/os/{numero}/pdf
```

**Descri√ß√£o**: Download dos arquivos XML e PDF do CT-e OS.

**Par√¢metros de URL**:
- `numero`: N√∫mero do CT-e OS

**Resposta**: Arquivo bin√°rio (XML ou PDF)

### **Convers√£o TX2 para XML**

```http
POST /cteos/exportaxml
```

**Descri√ß√£o**: Converte arquivo TX2 para XML com ou sem assinatura digital.

**Headers Obrigat√≥rios**:
```http
Content-Type: application/x-www-form-urlencoded
Authorization: Basic YWRtaW46MTIzbXVkYXI=
```

### **Envio para SEFAZ**

```http
POST /cteos/envia
```

**Descri√ß√£o**: Envia CT-e OS para a SEFAZ de forma s√≠ncrona para autoriza√ß√£o ou rejei√ß√£o.

**Headers Obrigat√≥rios**:
```http
Content-Type: application/x-www-form-urlencoded
Authorization: Basic YWRtaW46MTIzbXVkYXI=
```

**Par√¢metros do Body**:

| Par√¢metro | Tipo | Obrigat√≥rio | Descri√ß√£o | Exemplo |
|-----------|------|-------------|-----------|---------|
| `Grupo` | string | ‚úÖ | Nome do grupo configurado no SaaS | `GRUPO_EMPRESA` |
| `CNPJ` | string | ‚úÖ | CNPJ do emitente (apenas n√∫meros) | `11111111111111` |
| `Arquivo` | file | ‚úÖ | Conte√∫do do TX2 ou XML | Conte√∫do bin√°rio |

**Exemplo de Requisi√ß√£o**:
```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/envia" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=GRUPO_EMPRESA&CNPJ=11111111111111" \
  --data-binary @arquivo.txt
```

**Resposta de Sucesso**:
```
12345678,42120605793827000113574580000000031123456786,100,Autorizado o uso do CTe-OS
```

**Formato da Resposta**:
`"N√∫mero do lote", "Chave do CTe-OS", "cStat (C√≥digo de status)", "Mensagem da SEFAZ"`

**Resposta de Erro**:
```
EXCEPTION,EspdManCTeOSAssinarException,Problema ao assinar Nota(s). Exception: Falha ao Validar Lote para Envio. Erro: EspdSchemaValidationException O arquivo cont√©m 1 ou mais erros no de valida√ß√£o de esquema '5.00' viola a restri√ß√£o pattern de '3.00'. Falha da analise do atributo 'versao' com valor '5.00'
```

**Implementa√ß√£o em Diferentes Linguagens**:

```php
<?php
function enviarCTeOS($arquivoPath, $params) {
    $url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/envia";
    
    $headers = [
        'Authorization: Basic YWRtaW46MTIzbXVkYXI='
    ];
    
    // L√™ o arquivo
    $arquivo = file_get_contents($arquivoPath);
    
    $postData = [
        'Grupo' => $params['grupo'],
        'CNPJ' => $params['cnpj'],
        'Arquivo' => $arquivo
    ];
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    
    $resultado = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode !== 200) {
        throw new Exception("HTTP error! status: " . $httpCode);
    }
    
    // Verifica se √© uma resposta de sucesso ou erro
    if (strpos($resultado, 'EXCEPTION') !== false) {
        return ['success' => false, 'error' => $resultado];
    } else {
        // Parse da resposta de sucesso
        $partes = array_map('trim', explode(',', $resultado));
        if (count($partes) >= 4) {
            return [
                'success' => true,
                'numeroLote' => $partes[0],
                'chave' => $partes[1],
                'cStat' => (int)$partes[2],
                'mensagem' => $partes[3],
                'raw' => $resultado
            ];
        }
    }
}

// Uso
try {
    $resultado = enviarCTeOS('arquivo.txt', [
        'grupo' => 'GRUPO_EMPRESA',
        'cnpj' => '11111111111111'
    ]);
    
    if ($resultado['success']) {
        echo 'CT-e OS enviado com sucesso!' . PHP_EOL;
        echo 'Lote: ' . $resultado['numeroLote'] . PHP_EOL;
        echo 'Chave: ' . $resultado['chave'] . PHP_EOL;
        echo 'Status: ' . $resultado['cStat'] . PHP_EOL;
        echo 'Mensagem: ' . $resultado['mensagem'] . PHP_EOL;
    } else {
        echo 'Erro no envio: ' . $resultado['error'] . PHP_EOL;
    }
} catch (Exception $e) {
    echo 'Erro: ' . $e->getMessage() . PHP_EOL;
}
```


                    'mensagem': partes[3],
                    'raw': resultado
                }
            else:
                return {'success': False, 'error': 'Formato de resposta inv√°lido'}
            
    except requests.exceptions.RequestException as e:
        print(f"Erro no envio: {e}")
        raise

# Uso
resultado = enviar_cte_os('arquivo.txt', {
    'grupo': 'GRUPO_EMPRESA',
    'cnpj': '11111111111111'
})

if resultado['success']:
    print(f"CT-e OS enviado com sucesso!")
    print(f"Lote: {resultado['numero_lote']}")
    print(f"Chave: {resultado['chave']}")
    print(f"Status: {resultado['c_stat']}")
    print(f"Mensagem: {resultado['mensagem']}")
else:
    print(f"Erro no envio: {resultado['error']}")
```

#### **PHP**
```php
function enviarCTeOS($arquivoPath, $params) {
    $url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/envia";
    
    $headers = [
        'Authorization: Basic YWRtaW46MTIzbXVkYXI='
    ];
    
    // L√™ o arquivo
    if (!file_exists($arquivoPath)) {
        throw new Exception("Arquivo n√£o encontrado: {$arquivoPath}");
    }
    
    $arquivo = file_get_contents($arquivoPath);
    
    // Cria arquivo tempor√°rio
    $tempFile = tempnam(sys_get_temp_dir(), 'cte_');
    file_put_contents($tempFile, $arquivo);
    
    $postData = [
        'Grupo' => $params['grupo'],
        'CNPJ' => $params['cnpj'],
        'Arquivo' => new CURLFile($tempFile, 'text/plain', 'arquivo.txt')
    ];
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    // Remove arquivo tempor√°rio
    unlink($tempFile);
    
    if ($httpCode !== 200) {
        throw new Exception("Erro HTTP: " . $httpCode);
    }
    
    // Verifica se √© uma resposta de sucesso ou erro
    if (strpos($response, 'EXCEPTION') !== false) {
        return ['success' => false, 'error' => $response];
    } else {
        // Parse da resposta de sucesso
        $partes = array_map('trim', explode(',', $response));
        if (count($partes) >= 4) {
            return [
                'success' => true,
                'numero_lote' => $partes[0],
                'chave' => $partes[1],
                'c_stat' => intval($partes[2]),
                'mensagem' => $partes[3],
                'raw' => $response
            ];
        } else {
            return ['success' => false, 'error' => 'Formato de resposta inv√°lido'];
        }
    }
}

// Uso
try {
    $resultado = enviarCTeOS('arquivo.txt', [
        'grupo' => 'GRUPO_EMPRESA',
        'cnpj' => '11111111111111'
    ]);
    
    if ($resultado['success']) {
        echo "CT-e OS enviado com sucesso!\n";
        echo "Lote: " . $resultado['numero_lote'] . "\n";
        echo "Chave: " . $resultado['chave'] . "\n";
        echo "Status: " . $resultado['c_stat'] . "\n";
        echo "Mensagem: " . $resultado['mensagem'] . "\n";
    } else {
        echo "Erro no envio: " . $resultado['error'] . "\n";
    }
    
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage() . "\n";
}
```

### **Descarte de CT-e OS**

```http
POST /cteos/descarta
```

**Descri√ß√£o**: Descarta um CT-e OS rejeitado ou registrado para permitir reutiliza√ß√£o da numera√ß√£o.

**Headers Obrigat√≥rios**:
```http
Content-Type: application/x-www-form-urlencoded
Authorization: Basic YWRtaW46MTIzbXVkYXI=
```

**Par√¢metros do Body**:

| Par√¢metro | Tipo | Obrigat√≥rio | Descri√ß√£o | Exemplo |
|-----------|------|-------------|-----------|---------|
| `Grupo` | string | ‚úÖ | Nome do grupo configurado no SaaS | `GRUPO_EMPRESA` |
| `CNPJ` | string | ‚úÖ | CNPJ do grupo (apenas n√∫meros) | `12345678000199` |
| `ChaveNota` | string | ‚úÖ | Chave do CT-e OS (44 d√≠gitos) | `41150408187168000160576660000006671000000012` |
| `NumeroLote` | string | ‚úÖ | N√∫mero do lote do CT-e OS | `LOTE001` |

**Exemplo de Requisi√ß√£o**:
```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/descarta" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&ChaveNota=41150408187168000160576660000006671000000012&NumeroLote=LOTE001"
```

**Resposta de Sucesso**:
```
OK, Opera√ß√£o realizada com sucesso
```

**Resposta de Erro**:
```
EXCEPTION,EspdCheckParamsException,Somente CTe-OS REJEITADA\delimiter INUTILIZADA\delimiter REGISTRADA ou IMPORTADA(N√£o autorizada) pode ser descartada.
```

**Implementa√ß√£o em Diferentes Linguagens**:

#### **JavaScript/Node.js**
```javascript
const descartarCTeOS = async (params) => {
  const formData = new URLSearchParams();
  formData.append('Grupo', params.grupo);
  formData.append('CNPJ', params.cnpj);
  formData.append('ChaveNota', params.chaveNota);
  formData.append('NumeroLote', params.numeroLote);
  
  try {
    const response = await fetch('https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/descarta', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Authorization': 'Basic YWRtaW46MTIzbXVkYXI='
      },
      body: formData
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const resultado = await response.text();
    
    if (resultado.includes('OK, Opera√ß√£o realizada com sucesso')) {
      return { success: true, message: resultado };
    } else {
      return { success: false, error: resultado };
    }
    
  } catch (error) {
    console.error('Erro no descarte:', error);
    throw error;
  }
};

// Uso
const resultado = await descartarCTeOS({
  grupo: 'GRUPO_EMPRESA',
  cnpj: '12345678000199',
  chaveNota: '41150408187168000160576660000006671000000012',
  numeroLote: 'LOTE001'
});
```

#### **Python**
```python
import requests

def descartar_cte_os(params):
    url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/descarta"
    
    headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Authorization': 'Basic YWRtaW46MTIzbXVkYXI='
    }
    
    data = {
        'Grupo': params['grupo'],
        'CNPJ': params['cnpj'],
        'ChaveNota': params['chave_nota'],
        'NumeroLote': params['numero_lote']
    }
    
    try:
        response = requests.post(url, headers=headers, data=data)
        response.raise_for_status()
        
        resultado = response.text
        
        if 'OK, Opera√ß√£o realizada com sucesso' in resultado:
            return {'success': True, 'message': resultado}
        else:
            return {'success': False, 'error': resultado}
            
    except requests.exceptions.RequestException as e:
        print(f"Erro no descarte: {e}")
        raise

# Uso
resultado = descartar_cte_os({
    'grupo': 'GRUPO_EMPRESA',
    'cnpj': '12345678000199',
    'chave_nota': '41150408187168000160576660000006671000000012',
    'numero_lote': 'LOTE001'
})
```

#### **PHP**
```php
function descartarCTeOS($params) {
    $url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/descarta";
    
    $headers = [
        'Content-Type: application/x-www-form-urlencoded',
        'Authorization: Basic YWRtaW46MTIzbXVkYXI='
    ];
    
    $postData = http_build_query([
        'Grupo' => $params['grupo'],
        'CNPJ' => $params['cnpj'],
        'ChaveNota' => $params['chaveNota'],
        'NumeroLote' => $params['numeroLote']
    ]);
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode !== 200) {
        throw new Exception("Erro HTTP: " . $httpCode);
    }
    
    if (strpos($response, 'OK, Opera√ß√£o realizada com sucesso') !== false) {
        return ['success' => true, 'message' => $response];
    } else {
        return ['success' => false, 'error' => $response];
    }
}

// Uso
try {
    $resultado = descartarCTeOS([
        'grupo' => 'GRUPO_EMPRESA',
        'cnpj' => '12345678000199',
        'chaveNota' => '41150408187168000160576660000006671000000012',
        'numeroLote' => 'LOTE001'
    ]);
    
    if ($resultado['success']) {
        echo "Descarte realizado: " . $resultado['message'];
    } else {
        echo "Erro no descarte: " . $resultado['error'];
    }
    
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}
```

**Par√¢metros do Body**:

| Par√¢metro | Tipo | Obrigat√≥rio | Descri√ß√£o | Valores |
|-----------|------|-------------|-----------|---------|
| `Grupo` | string | ‚úÖ | Nome do grupo configurado no SaaS | `GRUPO_EMPRESA` |
| `CNPJ` | string | ‚úÖ | CNPJ do grupo (apenas n√∫meros) | `12345678000199` |
| `Arquivo` | file | ‚úÖ | Conte√∫do do arquivo TX2 | Conte√∫do bin√°rio |
| `Converter` | number | ‚úÖ | Ativa convers√£o TX2 para XML | `1` (Sim), `0` (N√£o) |
| `Assinado` | number | ‚ùå | XML com ou sem assinatura | `1` (Assinado), `0` (N√£o assinado) |
| `Url` | number | ‚ùå | Formato de retorno | `0` (Conte√∫do), `1` (URL download) |

**Exemplo de Requisi√ß√£o**:
```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=GRUPO_EMPRESA&CNPJ=12345678000199&Converter=1&Assinado=1&Url=0" \
  --data-binary @arquivo.txt
```

**Resposta de Sucesso**:

**URL = 0 (Conte√∫do do XML)**:
```xml
<CTeOS versao="3.00" xmlns="http://www.portalfiscal.inf.br/cte">
    <infCte Id="CTe35211223856927000123670730000000051100000270" versao="3.00">
        <ide>
            <cUF>35</cUF>
            <cCT>000000005</cCT>
            <CFOP>5353</CFOP>
            <natOp>PRESTACAO DE SERVICOS DE TRANSPORTE</natOp>
            <mod>57</mod>
            <serie>1</serie>
            <nCT>000000270</nCT>
            <dhEmi>2021-11-22T10:00:00-03:00</dhEmi>
            <tpImp>1</tpImp>
            <tpEmis>1</tpEmis>
            <tpCTe>0</tpCTe>
            <procEmi>0</procEmi>
            <verProc>1.0</verProc>
            <cMunEnv>3550308</cMunEnv>
            <xMunEnv>SAO PAULO</xMunEnv>
            <UFEnv>SP</UFEnv>
            <modal>01</modal>
            <tpServ>0</tpServ>
        </ide>
        <!-- ... resto do XML ... -->
    </infCte>
</CTeOS>
```

**URL = 1 (URL para download)**:
```
http://managersaashom.tecnospeed.com.br:7071/ManagerAPIWeb/download/ManagerCTeOS/43170704086596000145578460000000011000000009.xml
```

**Resposta de Erro**:
```
EXCEPTION,EspdAPIWebServerErrorException,Tipo: deve ser informado
```

**Implementa√ß√£o em Diferentes Linguagens**:

#### **JavaScript/Node.js**
```javascript
const converterTX2ParaXML = async (arquivoTX2, params) => {
  const formData = new FormData();
  formData.append('Grupo', params.grupo);
  formData.append('CNPJ', params.cnpj);
  formData.append('Arquivo', arquivoTX2);
  formData.append('Converter', params.converter);
  formData.append('Assinado', params.assinado);
  formData.append('Url', params.url);
  
  try {
    const response = await fetch('https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml', {
      method: 'POST',
      headers: {
        'Authorization': 'Basic YWRtaW46MTIzbXVkYXI='
      },
      body: formData
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    if (params.url === 1) {
      // Retorna URL para download
      return await response.text();
    } else {
      // Retorna conte√∫do do XML
      return await response.text();
    }
    
  } catch (error) {
    console.error('Erro na convers√£o:', error);
    throw error;
  }
};

// Uso
const resultado = await converterTX2ParaXML(arquivoTX2, {
  grupo: 'GRUPO_EMPRESA',
  cnpj: '12345678000199',
  converter: 1,
  assinado: 1,
  url: 0
});
```

#### **Python**
```python
import requests

def converter_tx2_para_xml(arquivo_tx2, params):
    url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml"
    
    headers = {
        'Authorization': 'Basic YWRtaW46MTIzbXVkYXI='
    }
    
    files = {
        'Arquivo': ('arquivo.txt', arquivo_tx2, 'text/plain')
    }
    
    data = {
        'Grupo': params['grupo'],
        'CNPJ': params['cnpj'],
        'Converter': params['converter'],
        'Assinado': params['assinado'],
        'Url': params['url']
    }
    
    try:
        response = requests.post(url, headers=headers, files=files, data=data)
        response.raise_for_status()
        
        if params['url'] == 1:
            # Retorna URL para download
            return response.text
        else:
            # Retorna conte√∫do do XML
            return response.text
            
    except requests.exceptions.RequestException as e:
        print(f"Erro na convers√£o: {e}")
        raise

# Uso
with open('arquivo.txt', 'rb') as f:
    arquivo_tx2 = f.read()

resultado = converter_tx2_para_xml(arquivo_tx2, {
    'grupo': 'GRUPO_EMPRESA',
    'cnpj': '12345678000199',
    'converter': 1,
    'assinado': 1,
    'url': 0
})
```

#### **PHP**
```php
function converterTX2ParaXML($arquivoTX2, $params) {
    $url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml";
    
    $headers = [
        'Authorization: Basic YWRtaW46MTIzbXVkYXI='
    ];
    
    $postData = [
        'Grupo' => $params['grupo'],
        'CNPJ' => $params['cnpj'],
        'Converter' => $params['converter'],
        'Assinado' => $params['assinado'],
        'Url' => $params['url']
    ];
    
    // Cria o arquivo tempor√°rio
    $tempFile = tempnam(sys_get_temp_dir(), 'tx2_');
    file_put_contents($tempFile, $arquivoTX2);
    
    $postData['Arquivo'] = new CURLFile($tempFile, 'text/plain', 'arquivo.txt');
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    // Remove arquivo tempor√°rio
    unlink($tempFile);
    
    if ($httpCode !== 200) {
        throw new Exception("Erro HTTP: " . $httpCode);
    }
    
    return $response;
}

// Uso
try {
    $arquivoTX2 = file_get_contents('arquivo.txt');
    
    $resultado = converterTX2ParaXML($arquivoTX2, [
        'grupo' => 'GRUPO_EMPRESA',
        'cnpj' => '12345678000199',
        'converter' => 1,
        'assinado' => 1,
        'url' => 0
    ]);
    
    echo $resultado;
    
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}
```

## Endpoints de NF-e

### **Emiss√£o de NF-e**

```http
POST /nfe/emitir
```

**Corpo da Requisi√ß√£o**:
```json
{
  "tipo_documento": "NFE",
  "emissor": {
    "cnpj": "12345678000199",
    "inscricao_estadual": "123456789",
    "razao_social": "EMPRESA EXEMPLO LTDA"
  },
  "destinatario": {
    "cnpj": "98765432000188",
    "razao_social": "CLIENTE EXEMPLO LTDA"
  },
  "itens": [
    {
      "codigo": "PROD001",
      "descricao": "Produto Exemplo",
      "quantidade": 2,
      "valor_unitario": 50.00,
      "valor_total": 100.00
    }
  ]
}
```

### **Consulta de Status NF-e**

```http
GET /nfe/{numero}/status
```

### **Cancelamento NF-e**

```http
POST /nfe/{numero}/cancelar
```

## Endpoints de NFC-e

### **Emiss√£o de NFC-e**

```http
POST /nfce/emitir
```

### **Consulta de Status NFC-e**

```http
GET /nfce/{numero}/status
```

### **Cancelamento NFC-e**

```http
POST /nfce/{numero}/cancelar
```

## Endpoints de MDF-e

### **Emiss√£o de MDF-e**

```http
POST /mdfe/emitir
```

### **Encerramento de MDF-e**

```http
POST /mdfe/{numero}/encerrar
```

## Endpoints de CF-e

### **Emiss√£o CF-e SAT**

```http
POST /cfe/sat/emitir
```

### **Emiss√£o CF-e MFE**

```http
POST /cfe/mfe/emitir
```

## Endpoints de GNRE

### **Emiss√£o de GNRE**

```http
POST /gnre/emitir
```

## C√≥digos de Status HTTP

### **Sucesso**
- **200 OK**: Requisi√ß√£o processada com sucesso
- **201 Created**: Documento criado com sucesso

### **Erro do Cliente**
- **400 Bad Request**: Dados inv√°lidos ou malformados
- **401 Unauthorized**: Token de autentica√ß√£o inv√°lido
- **403 Forbidden**: Token sem permiss√£o para a opera√ß√£o
- **404 Not Found**: Recurso n√£o encontrado
- **429 Too Many Requests**: Rate limit excedido

### **Erro do Servidor**
- **500 Internal Server Error**: Erro interno do servidor
- **502 Bad Gateway**: Erro na comunica√ß√£o com SEFAZ
- **503 Service Unavailable**: Servi√ßo temporariamente indispon√≠vel

## Rate Limiting

### **Limites por Token**
- **Requisi√ß√µes por minuto**: 1000
- **Requisi√ß√µes por hora**: 50000
- **Requisi√ß√µes por dia**: 1000000

### **Headers de Rate Limiting**
```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1642248600
```

## Tratamento de Erros

### **Estrutura de Erro Padr√£o**
```json
{
  "status": "error",
  "code": "ERROR_CODE",
  "message": "Descri√ß√£o do erro",
  "details": {
    "field": "campo_espec√≠fico",
    "value": "valor_informado",
    "constraint": "restri√ß√£o_violada"
  },
  "timestamp": "2024-01-15T10:30:00Z",
  "request_id": "req_123456789"
}
```

### **C√≥digos de Erro Comuns**

| C√≥digo | Descri√ß√£o | Solu√ß√£o |
|--------|-----------|---------|
| `INVALID_CNPJ` | CNPJ inv√°lido | Verificar formato e validade |
| `INVALID_IE` | Inscri√ß√£o estadual inv√°lida | Verificar com a SEFAZ |
| `MISSING_REQUIRED_FIELD` | Campo obrigat√≥rio ausente | Preencher todos os campos obrigat√≥rios |
| `INVALID_VALUE` | Valor inv√°lido | Verificar formato e regras de neg√≥cio |
| `CERTIFICATE_EXPIRED` | Certificado digital expirado | Renovar certificado no dashboard |
| `SEFAZ_UNAVAILABLE` | SEFAZ indispon√≠vel | Aguardar e tentar novamente |

## Exemplos de Uso

### **cURL - Emiss√£o de CT-e OS**

```bash
curl -X POST "https://api.managersaas.com/v1/cte/os/emitir" \
  -H "Authorization: Bearer SEU_TOKEN_AQUI" \
  -H "Content-Type: application/json" \
  -d '{
    "tipo_documento": "CTE_OS",
    "emissor": {
      "cnpj": "12345678000199",
      "razao_social": "TRANSPORTADORA EXEMPLO LTDA"
    },
    "servico": {
      "descricao": "Transporte de carga",
      "valor_frete": 150.00
    }
  }'
```

### **JavaScript - Emiss√£o de CT-e OS**

```javascript
const emitirCTeOS = async (dados) => {
  try {
    const response = await fetch('https://api.managersaas.com/v1/cte/os/emitir', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(dados)
    });
    
    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message);
    }
    
    return await response.json();
  } catch (error) {
    console.error('Erro na emiss√£o:', error);
    throw error;
  }
};
```

### **Python - Emiss√£o de CT-e OS**

```python
import requests

def emitir_cte_os(dados, token):
    url = "https://api.managersaas.com/v1/cte/os/emitir"
    headers = {
        "Authorization": f"Bearer {token}",
        "Content-Type": "application/json"
    }
    
    try:
        response = requests.post(url, json=dados, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"Erro na emiss√£o: {e}")
        raise
```

## Webhooks

### **Configura√ß√£o de Webhook**

```http
POST /webhooks/configurar
```

**Corpo da Requisi√ß√£o**:
```json
{
  "url": "https://seu-site.com/webhook",
  "eventos": ["documento_autorizado", "documento_rejeitado"],
  "ativo": true
}
```

### **Eventos Dispon√≠veis**
- `documento_autorizado`: Documento autorizado pela SEFAZ
- `documento_rejeitado`: Documento rejeitado pela SEFAZ
- `documento_cancelado`: Documento cancelado
- `documento_processando`: Documento em processamento

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card
    title="Modelos de Dados"
    href="/api/models/request"
    icon="database"
  >
    Estrutura completa dos dados de entrada
  </Card>
  <Card
    title="Exemplos de Integra√ß√£o"
    href="/examples/php"
    icon="code"
  >
    Veja exemplos pr√°ticos em diferentes linguagens
  </Card>
  <Card
    title="Monitorador de Pastas"
    href="/api/monitor/overview"
    icon="folder"
  >
    Alternativa √† API REST
  </Card>
  <Card
    title="Suporte"
    href="mailto:suporte@managersaas.com"
    icon="message-circle"
  >
    Entre em contato conosco
  </Card>
</CardGroup>

---

üîå **API Completa**: Todos os endpoints est√£o documentados com exemplos pr√°ticos e c√≥digos de resposta. Para d√∫vidas espec√≠ficas, consulte nossa equipe de suporte. 