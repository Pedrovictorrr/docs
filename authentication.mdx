---
title: 'Autentica√ß√£o'
description: 'Como autenticar e autorizar suas requisi√ß√µes para a API do Manager SaaS'
---

# Autentica√ß√£o - Manager SaaS API

A API do Manager SaaS utiliza autentica√ß√£o baseada em tokens (Bearer Token) para garantir a seguran√ßa e controle de acesso aos recursos.

## Vis√£o Geral

### **Tipo de Autentica√ß√£o**
- **M√©todo**: Bearer Token Authentication
- **Formato**: `Authorization: Bearer <token>`
- **Validade**: Tokens n√£o expiram (podem ser revogados)
- **Escopo**: Controle granular de permiss√µes

### **Seguran√ßa**
- Todas as comunica√ß√µes s√£o criptografadas via HTTPS
- Tokens s√£o armazenados de forma segura
- Logs de auditoria para todas as opera√ß√µes
- Rate limiting para prevenir abuso

## Obten√ß√£o do Token

### **1. Acesso ao Dashboard**

1. Acesse [dashboard.managersaas.com](https://dashboard.managersaas.com)
2. Fa√ßa login com suas credenciais
3. Navegue para **Configura√ß√µes > API Keys**

### **2. Gera√ß√£o de Nova Chave**

1. Clique em **"Gerar Nova Chave"**
2. Preencha os campos:
   - **Nome**: Identifica√ß√£o da chave (ex: "Sistema ERP")
   - **Descri√ß√£o**: Descri√ß√£o opcional
   - **Ambiente**: Produ√ß√£o ou Homologa√ß√£o
3. Clique em **"Gerar"**

### **3. Configura√ß√£o de Permiss√µes**

Selecione as permiss√µes necess√°rias:

<CardGroup cols={2}>
  <Card
    title="Documentos"
    icon="file-text"
  >
    - Emitir documentos
    - Consultar documentos
    - Cancelar documentos
    - Download de arquivos
  </Card>
  <Card
    title="Empresa"
    icon="building"
  >
    - Consultar configura√ß√µes
    - Atualizar dados
    - Gerenciar usu√°rios
  </Card>
  <Card
    title="Monitoramento"
    icon="eye"
  >
    - Status da API
    - Logs de sistema
    - M√©tricas de uso
  </Card>
  <Card
    title="Webhooks"
    icon="bell"
  >
    - Configurar webhooks
    - Gerenciar eventos
    - Hist√≥rico de notifica√ß√µes
  </Card>
</CardGroup>

## Uso do Token

### **Header de Autoriza√ß√£o**

Inclua o token em todas as requisi√ß√µes:

```bash
curl -X GET "https://api.managersaas.com/v1/status" \
  -H "Authorization: Bearer SEU_TOKEN_AQUI" \
  -H "Content-Type: application/json"
```

### **Exemplos em Diferentes Linguagens**

#### **JavaScript/Node.js**
```javascript
const response = await fetch('https://api.managersaas.com/v1/status', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  }
});
```

#### **Python**
```python
import requests

headers = {
    'Authorization': f'Bearer {token}',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.managersaas.com/v1/status',
    headers=headers
)
```

#### **PHP**
```php
$headers = [
    'Authorization: Bearer ' . $token,
    'Content-Type: application/json'
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.managersaas.com/v1/status');
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);
```

#### **Java**
```java
HttpClient client = HttpClient.newHttpClient();

HttpRequest request = HttpRequest.newBuilder()
    .uri(URI.create("https://api.managersaas.com/v1/status"))
    .header("Authorization", "Bearer " + token)
    .header("Content-Type", "application/json")
    .GET()
    .build();

HttpResponse<String> response = client.send(request, 
    HttpResponse.BodyHandlers.ofString());
```

## Gerenciamento de Tokens

### **Listar Tokens Ativos**

```bash
curl -X GET "https://api.managersaas.com/v1/auth/tokens" \
  -H "Authorization: Bearer SEU_TOKEN_AQUI"
```

**Resposta:**
```json
{
  "status": "success",
  "data": [
    {
      "id": "tok_123456789",
      "nome": "Sistema ERP",
      "descricao": "Token para integra√ß√£o com ERP",
      "criado_em": "2024-01-15T10:30:00Z",
      "ultimo_uso": "2024-01-15T15:45:00Z",
      "permissoes": ["documentos:emitir", "documentos:consultar"],
      "ativo": true
    }
  ]
}
```

### **Revogar Token**

```bash
curl -X DELETE "https://api.managersaas.com/v1/auth/tokens/tok_123456789" \
  -H "Authorization: Bearer SEU_TOKEN_AQUI"
```

### **Atualizar Permiss√µes**

```bash
curl -X PUT "https://api.managersaas.com/v1/auth/tokens/tok_123456789" \
  -H "Authorization: Bearer SEU_TOKEN_AQUI" \
  -H "Content-Type: application/json" \
  -d '{
    "permissoes": ["documentos:emitir", "documentos:consultar", "empresa:consultar"]
  }'
```

## Permiss√µes Dispon√≠veis

### **Documentos**
- `documentos:emitir` - Emitir documentos fiscais
- `documentos:consultar` - Consultar documentos
- `documentos:cancelar` - Cancelar documentos
- `documentos:download` - Download de arquivos

### **Empresa**
- `empresa:consultar` - Consultar dados da empresa
- `empresa:atualizar` - Atualizar dados da empresa
- `empresa:usuarios` - Gerenciar usu√°rios

### **Monitoramento**
- `monitoramento:status` - Consultar status da API
- `monitoramento:logs` - Acessar logs do sistema
- `monitoramento:metricas` - Consultar m√©tricas de uso

### **Webhooks**
- `webhooks:configurar` - Configurar webhooks
- `webhooks:gerenciar` - Gerenciar configura√ß√µes
- `webhooks:historico` - Consultar hist√≥rico

## Boas Pr√°ticas de Seguran√ßa

### **1. Armazenamento Seguro**
```bash
# ‚ùå NUNCA fa√ßa isso
echo "TOKEN=abc123" >> .env

# ‚úÖ Fa√ßa isso
echo "TOKEN=$(openssl rand -hex 32)" >> .env
chmod 600 .env
```

### **2. Rota√ß√£o de Tokens**
- Revogue tokens antigos regularmente
- Use tokens espec√≠ficos para cada ambiente
- Monitore o uso dos tokens

### **3. Controle de Acesso**
- Aplique o princ√≠pio do menor privil√©gio
- Revogue tokens de funcion√°rios que sa√≠ram
- Monitore logs de acesso

### **4. Valida√ß√£o de Tokens**
```javascript
// Valide se o token est√° presente
if (!token) {
  throw new Error('Token de autentica√ß√£o √© obrigat√≥rio');
}

// Valide formato do token
if (!/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/.test(token)) {
  throw new Error('Formato de token inv√°lido');
}
```

## Tratamento de Erros

### **Erro 401 - N√£o Autorizado**
```json
{
  "status": "error",
  "code": "UNAUTHORIZED",
  "message": "Token de autentica√ß√£o inv√°lido ou expirado",
  "details": {
    "token_provided": "abc123...",
    "error_type": "INVALID_TOKEN"
  }
}
```

**Solu√ß√µes:**
- Verifique se o token est√° correto
- Confirme se o token n√£o foi revogado
- Verifique as permiss√µes necess√°rias

### **Erro 403 - Proibido**
```json
{
  "status": "error",
  "code": "FORBIDDEN",
  "message": "Token n√£o possui permiss√£o para esta opera√ß√£o",
  "details": {
    "permission_required": "documentos:emitir",
    "permissions_granted": ["documentos:consultar"]
  }
}
```

**Solu√ß√µes:**
- Solicite permiss√µes adicionais
- Verifique se est√° usando o token correto
- Entre em contato com o administrador

## Rate Limiting

### **Limites por Token**
- **Requisi√ß√µes por minuto**: 1000
- **Requisi√ß√µes por hora**: 50000
- **Requisi√ß√µes por dia**: 1000000

### **Headers de Rate Limiting**
```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1642248600
```

### **Tratamento de Rate Limiting**
```javascript
if (response.status === 429) {
  const resetTime = response.headers.get('X-RateLimit-Reset');
  const waitTime = (resetTime * 1000) - Date.now();
  
  if (waitTime > 0) {
    await new Promise(resolve => setTimeout(resolve, waitTime));
    // Retry the request
  }
}
```

## Logs de Auditoria

### **Informa√ß√µes Registradas**
- Data e hora da requisi√ß√£o
- Token utilizado
- Endpoint acessado
- M√©todo HTTP
- Status da resposta
- IP de origem
- User-Agent

### **Consulta de Logs**
```bash
curl -X GET "https://api.managersaas.com/v1/auth/logs" \
  -H "Authorization: Bearer SEU_TOKEN_AQUI" \
  -G \
  -d "data_inicio=2024-01-01" \
  -d "data_fim=2024-01-15" \
  -d "token_id=tok_123456789"
```

## Suporte e Contato

### **Problemas de Autentica√ß√£o**
- **Email**: suporte@managersaas.com
- **Documenta√ß√£o**: docs.managersaas.com
- **Status**: status.managersaas.com

### **Recursos Adicionais**
- [Primeiros Passos](/quickstart) - Configure sua primeira integra√ß√£o
- [Refer√™ncia da API](/api/endpoints/emission) - Todos os endpoints dispon√≠veis
- [Exemplos de Integra√ß√£o](/examples/php) - Casos pr√°ticos

---

üîê **Seguran√ßa √© nossa prioridade!** Para d√∫vidas sobre autentica√ß√£o ou seguran√ßa, entre em contato com nossa equipe de suporte. 