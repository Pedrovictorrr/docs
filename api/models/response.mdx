---
title: 'Modelos de Resposta'
description: 'Estruturas de resposta padronizadas para todos os endpoints da API'
---

# Modelos de Resposta

Esta p√°gina documenta todas as estruturas de resposta padronizadas retornadas pelos endpoints da API do Manager SaaS. Todas as respostas seguem um formato consistente para facilitar a integra√ß√£o.

## Estrutura Padr√£o de Resposta

### **üìã Formato Base**

Todas as respostas da API seguem uma estrutura consistente:

```json
{
  "success": true,
  "data": {
    // dados espec√≠ficos da opera√ß√£o
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **üìä Campos Padr√£o**

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `success` | boolean | Indica se a opera√ß√£o foi bem-sucedida |
| `data` | object | Dados espec√≠ficos da resposta |
| `meta` | object | Metadados da requisi√ß√£o |

## Respostas de Sucesso

### **‚úÖ Emiss√£o de Documentos**

```json
{
  "success": true,
  "data": {
    "id": "cte_123456789",
    "numero": "000000001",
    "serie": "1",
    "chave": "41150408187168000160576660000006671000000012",
    "status": "PENDENTE",
    "protocolo": "123456789012345",
    "data_emissao": "2024-01-01T12:00:00Z",
    "data_autorizacao": null,
    "xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>...",
    "pdf_url": "https://api.managersaas.com/download/cte_123456789.pdf"
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **‚úÖ Consulta de Documentos**

```json
{
  "success": true,
  "data": {
    "documentos": [
      {
        "id": "cte_123456789",
        "numero": "000000001",
        "serie": "1",
        "chave": "41150408187168000160576660000006671000000012",
        "status": "AUTORIZADO",
        "protocolo": "123456789012345",
        "data_emissao": "2024-01-01T12:00:00Z",
        "data_autorizacao": "2024-01-01T12:01:00Z",
        "emitente": {
          "cnpj": "12345678000199",
          "razao_social": "EMPRESA EXEMPLO LTDA",
          "ie": "123456789"
        },
        "tomador": {
          "cnpj": "98765432000188",
          "razao_social": "CLIENTE EXEMPLO LTDA"
        },
        "valores": {
          "total": 150.00,
          "frete": 100.00,
          "seguro": 25.00,
          "despesas": 25.00
        }
      }
    ],
    "pagination": {
      "total": 150,
      "page": 1,
      "limit": 50,
      "pages": 3
    }
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **‚úÖ Convers√£o TX2 para XML**

```json
{
  "success": true,
  "data": {
    "arquivo_original": "arquivo.txt",
    "arquivo_convertido": "cte_os.xml",
    "tamanho_original": 2048,
    "tamanho_convertido": 5120,
    "assinado": true,
    "versao": "3.00",
    "xml_content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>...",
    "download_url": "https://api.managersaas.com/download/cte_os.xml"
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **‚úÖ Envio para SEFAZ**

```json
{
  "success": true,
  "data": {
    "numero_lote": "12345678",
    "chave": "42120605793827000113574580000000031123456786",
    "cstat": 100,
    "mensagem": "Autorizado o uso do CTe-OS",
    "status": "AUTORIZADO",
    "protocolo": "123456789012345",
    "data_autorizacao": "2024-01-01T12:01:00Z",
    "xml_autorizado": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>...",
    "pdf_url": "https://api.managersaas.com/download/cte_autorizado.pdf"
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **‚úÖ Descarte de Documentos**

```json
{
  "success": true,
  "data": {
    "id": "cte_123456789",
    "chave": "41150408187168000160576660000006671000000012",
    "status_anterior": "REJEITADO",
    "status_atual": "DESCARTADO",
    "data_descarte": "2024-01-01T12:00:00Z",
    "motivo": "Rejeitado pela SEFAZ - dados incorretos",
    "numeration_liberada": true,
    "numero_liberado": "000000001"
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **‚úÖ Status de Documentos**

```json
{
  "success": true,
  "data": {
    "id": "cte_123456789",
    "numero": "000000001",
    "serie": "1",
    "chave": "41150408187168000160576660000006671000000012",
    "status": "AUTORIZADO",
    "protocolo": "123456789012345",
    "data_emissao": "2024-01-01T12:00:00Z",
    "data_autorizacao": "2024-01-01T12:01:00Z",
    "data_cancelamento": null,
    "motivo_cancelamento": null,
    "eventos": [
      {
        "tipo": "EMISSAO",
        "data": "2024-01-01T12:00:00Z",
        "status": "SUCESSO",
        "mensagem": "Documento emitido com sucesso"
      },
      {
        "tipo": "ENVIO_SEFAZ",
        "data": "2024-01-01T12:00:30Z",
        "status": "SUCESSO",
        "mensagem": "Enviado para SEFAZ"
      },
      {
        "tipo": "AUTORIZACAO",
        "data": "2024-01-01T12:01:00Z",
        "status": "SUCESSO",
        "mensagem": "Autorizado pela SEFAZ"
      }
    ]
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

## Respostas de Erro

### **‚ùå Formato Padr√£o de Erro**

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Par√¢metros inv√°lidos",
    "details": [
      {
        "field": "cnpj",
        "message": "CNPJ deve ter 14 d√≠gitos",
        "value": "123456789",
        "rule": "length"
      },
      {
        "field": "email",
        "message": "Email deve ser v√°lido",
        "value": "email_invalido",
        "rule": "email"
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  },
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0"
  }
}
```

### **‚ùå Erros de Valida√ß√£o**

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Dados do documento inv√°lidos",
    "details": [
      {
        "field": "destinatario.cnpj",
        "message": "CNPJ do destinat√°rio √© obrigat√≥rio",
        "rule": "required"
      },
      {
        "field": "valores.total",
        "message": "Valor total deve ser maior que zero",
        "value": 0,
        "rule": "min"
      },
      {
        "field": "data_emissao",
        "message": "Data de emiss√£o n√£o pode ser futura",
        "value": "2025-01-01T12:00:00Z",
        "rule": "date_not_future"
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

### **‚ùå Erros de Autentica√ß√£o**

```json
{
  "success": false,
  "error": {
    "code": "AUTHENTICATION_ERROR",
    "message": "Token de autentica√ß√£o inv√°lido",
    "details": [
      {
        "field": "authorization",
        "message": "Token expirado",
        "expired_at": "2024-01-01T11:00:00Z"
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

### **‚ùå Erros de Autoriza√ß√£o**

```json
{
  "success": false,
  "error": {
    "code": "AUTHORIZATION_ERROR",
    "message": "Acesso negado para esta opera√ß√£o",
    "details": [
      {
        "field": "permission",
        "message": "Usu√°rio n√£o tem permiss√£o para emitir CT-e OS",
        "required_permission": "cte.emit",
        "user_permissions": ["cte.read", "cte.download"]
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

### **‚ùå Erros de Rate Limiting**

```json
{
  "success": false,
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Limite de requisi√ß√µes excedido",
    "details": [
      {
        "field": "rate_limit",
        "message": "M√°ximo de 100 requisi√ß√µes por minuto",
        "limit": 100,
        "reset_at": "2024-01-01T12:01:00Z"
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

### **‚ùå Erros Internos**

```json
{
  "success": false,
  "error": {
    "code": "INTERNAL_ERROR",
    "message": "Erro interno do servidor",
    "details": [
      {
        "field": "system",
        "message": "Falha na comunica√ß√£o com SEFAZ",
        "component": "sefaz_gateway"
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

## C√≥digos de Erro

### **üìã C√≥digos de Erro Padr√£o**

| C√≥digo | Descri√ß√£o | HTTP Status |
|--------|-----------|-------------|
| `VALIDATION_ERROR` | Erro de valida√ß√£o de dados | 400 |
| `AUTHENTICATION_ERROR` | Erro de autentica√ß√£o | 401 |
| `AUTHORIZATION_ERROR` | Erro de autoriza√ß√£o | 403 |
| `NOT_FOUND_ERROR` | Recurso n√£o encontrado | 404 |
| `RATE_LIMIT_EXCEEDED` | Rate limit excedido | 429 |
| `INTERNAL_ERROR` | Erro interno do servidor | 500 |
| `SERVICE_UNAVAILABLE` | Servi√ßo indispon√≠vel | 503 |

### **üìã C√≥digos de Erro Espec√≠ficos**

| C√≥digo | Descri√ß√£o | Contexto |
|--------|-----------|----------|
| `CTE_ALREADY_EXISTS` | CT-e OS j√° existe | Emiss√£o |
| `CTE_NOT_FOUND` | CT-e OS n√£o encontrado | Consulta/Download |
| `CTE_CANNOT_BE_CANCELLED` | CT-e OS n√£o pode ser cancelado | Cancelamento |
| `CTE_CANNOT_BE_DISCARDED` | CT-e OS n√£o pode ser descartado | Descarte |
| `INVALID_TX2_FORMAT` | Formato TX2 inv√°lido | Convers√£o |
| `CERTIFICATE_EXPIRED` | Certificado digital expirado | Assinatura |
| `SEFAZ_UNAVAILABLE` | SEFAZ indispon√≠vel | Envio |

## Metadados da Resposta

### **üìä Campo Meta**

Todas as respostas incluem metadados √∫teis:

```json
{
  "meta": {
    "timestamp": "2024-01-01T12:00:00Z",
    "request_id": "req_1234567890abcdef",
    "version": "1.0",
    "environment": "production",
    "server": "api-01.managersaas.com",
    "processing_time": 1250
  }
}
```

### **üìã Campos de Metadados**

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `timestamp` | string | Timestamp da resposta (ISO 8601) |
| `request_id` | string | ID √∫nico da requisi√ß√£o |
| `version` | string | Vers√£o da API |
| `environment` | string | Ambiente (production, staging, development) |
| `server` | string | Servidor que processou a requisi√ß√£o |
| `processing_time` | integer | Tempo de processamento em milissegundos |

## Headers de Resposta

### **üì§ Headers Padr√£o**

```http
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
X-Request-ID: req_1234567890abcdef
X-Processing-Time: 1250
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1640995200
```

### **üìã Headers Espec√≠ficos**

| Header | Descri√ß√£o | Exemplo |
|--------|-----------|---------|
| `X-Request-ID` | ID √∫nico da requisi√ß√£o | `req_1234567890abcdef` |
| `X-Processing-Time` | Tempo de processamento (ms) | `1250` |
| `X-RateLimit-Limit` | Limite de rate limiting | `100` |
| `X-RateLimit-Remaining` | Requisi√ß√µes restantes | `95` |
| `X-RateLimit-Reset` | Timestamp de reset | `1640995200` |

## Pagina√ß√£o

### **üìÑ Respostas Paginadas**

Para endpoints que retornam m√∫ltiplos registros:

```json
{
  "success": true,
  "data": {
    "documentos": [...],
    "pagination": {
      "total": 150,
      "page": 1,
      "limit": 50,
      "pages": 3,
      "has_next": true,
      "has_prev": false,
      "next_page": 2,
      "prev_page": null
    }
  },
  "meta": {...}
}
```

### **üìä Campos de Pagina√ß√£o**

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `total` | integer | Total de registros |
| `page` | integer | P√°gina atual |
| `limit` | integer | Registros por p√°gina |
| `pages` | integer | Total de p√°ginas |
| `has_next` | boolean | Tem pr√≥xima p√°gina |
| `has_prev` | boolean | Tem p√°gina anterior |
| `next_page` | integer | Pr√≥xima p√°gina |
| `prev_page` | integer | P√°gina anterior |

## Respostas de Download

### **üì• Arquivos Bin√°rios**

Para endpoints de download (XML, PDF):

```http
HTTP/1.1 200 OK
Content-Type: application/xml
Content-Disposition: attachment; filename="cte_os.xml"
Content-Length: 5120
X-Request-ID: req_1234567890abcdef
```

### **üì• Resposta de Download com Erro**

```json
{
  "success": false,
  "error": {
    "code": "FILE_NOT_FOUND",
    "message": "Arquivo n√£o encontrado",
    "details": [
      {
        "field": "file",
        "message": "Arquivo XML n√£o dispon√≠vel para este CT-e OS",
        "cte_id": "cte_123456789"
      }
    ],
    "request_id": "req_1234567890abcdef",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

## Respostas de Webhook

### **üîî Formato de Webhook**

```json
{
  "event": "document.authorized",
  "data": {
    "id": "cte_123456789",
    "chave": "41150408187168000160576660000006671000000012",
    "status": "AUTORIZADO",
    "protocolo": "123456789012345",
    "data_autorizacao": "2024-01-01T12:01:00Z"
  },
  "timestamp": "2024-01-01T12:01:00Z",
  "signature": "sha256=abc123..."
}
```

### **üìã Campos de Webhook**

| Campo | Tipo | Descri√ß√£o |
|-------|------|-----------|
| `event` | string | Tipo do evento |
| `data` | object | Dados do evento |
| `timestamp` | string | Timestamp do evento |
| `signature` | string | Assinatura HMAC-SHA256 |

## Tratamento de Respostas

### **üíª JavaScript/Node.js**

```javascript
const processarResposta = async (response) => {
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }
  
  const resultado = await response.json();
  
  if (resultado.success) {
    return {
      success: true,
      data: resultado.data,
      meta: resultado.meta
    };
  } else {
    throw new Error(resultado.error.message);
  }
};

// Uso
try {
  const resultado = await processarResposta(response);
  console.log('Sucesso:', resultado.data);
} catch (error) {
  console.error('Erro:', error.message);
}
```

### **üêç Python**

```python
def processar_resposta(response):
    if not response.ok:
        response.raise_for_status()
    
    resultado = response.json()
    
    if resultado['success']:
        return {
            'success': True,
            'data': resultado['data'],
            'meta': resultado['meta']
        }
    else:
        raise Exception(resultado['error']['message'])

# Uso
try:
    resultado = processar_resposta(response)
    print('Sucesso:', resultado['data'])
except Exception as error:
    print('Erro:', str(error))
```

### **üêò PHP**

```php
function processarResposta($response) {
    $resultado = json_decode($response, true);
    
    if ($resultado['success']) {
        return [
            'success' => true,
            'data' => $resultado['data'],
            'meta' => $resultado['meta']
        ];
    } else {
        throw new Exception($resultado['error']['message']);
    }
}

// Uso
try {
    $resultado = processarResposta($response);
    echo "Sucesso: " . json_encode($resultado['data']);
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}
```

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card
    title="Endpoints"
    href="/api/endpoints/emission"
    icon="code"
  >
    Explore todos os endpoints
  </Card>
  <Card
    title="Modelos de Requisi√ß√£o"
    href="/api/models/request"
    icon="database"
  >
    Estruturas de entrada
  </Card>
  <Card
    title="Tratamento de Erros"
    href="/api/models/errors"
    icon="alert-triangle"
  >
    Guia de erros
  </Card>
  <Card
    title="Suporte"
    href="mailto:suporte@managersaas.com"
    icon="message-circle"
  >
    Entre em contato
  </Card>
</CardGroup>

---

üìã **Respostas Padronizadas**: Todas as respostas da API seguem um formato consistente para facilitar a integra√ß√£o. Para d√∫vidas sobre estruturas espec√≠ficas, consulte nossa equipe de suporte. 