---
title: 'Cancelamento de CT-e OS'
description: 'Cancela CT-e OS autorizados pela SEFAZ'
---

# Cancelamento de CT-e OS

A rota de cancelamento permite cancelar um CT-e OS que foi autorizado pela SEFAZ. Apenas documentos com status "AUTORIZADO" podem ser cancelados.

## Endpoint de Cancelamento

```http
POST https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/cancela
```

## Autenticação

### **Headers Obrigatórios**

```http
Content-Type: application/x-www-form-urlencoded
Authorization: Basic YWRtaW46MTIzbXVkYXI=
```

## Parâmetros da Requisição

### **Parâmetros Obrigatórios**

| Parâmetro | Tipo | Descrição | Exemplo |
|-----------|------|-----------|---------|
| `Grupo` | string | Nome do grupo configurado no SaaS | `GRUPO_EMPRESA` |
| `CNPJ` | string | CNPJ do emitente (apenas números) | `11111111111111` |
| `ChaveNota` | string | Chave do CT-e OS (44 dígitos) | `41150408187168000160576660000006671000000012` |
| `Motivo` | string | Motivo do cancelamento | `Erro nos dados do documento` |

## Exemplo de Requisição

```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/cancela" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=GRUPO_EMPRESA&CNPJ=11111111111111&ChaveNota=41150408187168000160576660000006671000000012&Motivo=Erro nos dados do documento"
```

## Respostas da API

### **Resposta de Sucesso**

```
OK, Cancelamento realizado com sucesso
```

### **Resposta de Erro**

```
EXCEPTION,EspdCheckParamsException,CT-e OS não pode ser cancelado
```

## Implementação

### **JavaScript/Node.js**

```javascript
const cancelarCTeOS = async (params) => {
  const formData = new URLSearchParams();
  formData.append('Grupo', params.grupo);
  formData.append('CNPJ', params.cnpj);
  formData.append('ChaveNota', params.chaveNota);
  formData.append('Motivo', params.motivo);
  
  try {
    const response = await fetch('https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/cancela', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Authorization': 'Basic YWRtaW46MTIzbXVkYXI='
      },
      body: formData
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const resultado = await response.text();
    
    if (resultado.includes('OK, Cancelamento realizado com sucesso')) {
      return { success: true, message: resultado };
    } else {
      return { success: false, error: resultado };
    }
    
  } catch (error) {
    console.error('Erro no cancelamento:', error);
    throw error;
  }
};
```

### **Python**

```python
import requests

def cancelar_cte_os(params):
    url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/cancela"
    
    headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Authorization': 'Basic YWRtaW46MTIzbXVkYXI='
    }
    
    data = {
        'Grupo': params['grupo'],
        'CNPJ': params['cnpj'],
        'ChaveNota': params['chave_nota'],
        'Motivo': params['motivo']
    }
    
    try:
        response = requests.post(url, headers=headers, data=data)
        response.raise_for_status()
        
        resultado = response.text
        
        if 'OK, Cancelamento realizado com sucesso' in resultado:
            return {'success': True, 'message': resultado}
        else:
            return {'success': False, 'error': resultado}
            
    except requests.exceptions.RequestException as e:
        print(f"Erro no cancelamento: {e}")
        raise
```

### **PHP**

```php
function cancelarCTeOS($params) {
    $url = "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/cancela";
    
    $headers = [
        'Content-Type: application/x-www-form-urlencoded',
        'Authorization: Basic YWRtaW46MTIzbXVkYXI='
    ];
    
    $postData = http_build_query([
        'Grupo' => $params['grupo'],
        'CNPJ' => $params['cnpj'],
        'ChaveNota' => $params['chaveNota'],
        'Motivo' => $params['motivo']
    ]);
    
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode !== 200) {
        throw new Exception("Erro HTTP: " . $httpCode);
    }
    
    if (strpos($response, 'OK, Cancelamento realizado com sucesso') !== false) {
        return ['success' => true, 'message' => $response];
    } else {
        return ['success' => false, 'error' => $response];
    }
}
```

## Casos de Uso

- **Erro nos dados**: Correção de informações incorretas
- **Mudança de decisão**: Cancelamento por decisão comercial
- **Problemas técnicos**: Cancelamento por falhas no sistema
- **Reemissão**: Cancelamento para emissão com dados corretos

## Limitações

- Apenas CT-e OS com status "AUTORIZADO" podem ser cancelados
- O cancelamento deve ser realizado dentro do prazo legal
- É necessário informar um motivo válido para o cancelamento

## Próximos Passos

<CardGroup cols={2}>
  <Card
    title="Emissão de CT-e OS"
    href="/api/endpoints/emission"
    icon="rocket"
  >
    Emita novos documentos
  </Card>
  <Card
    title="Envio para SEFAZ"
    href="/api/endpoints/sending"
    icon="send"
  >
    Envie para autorização
  </Card>
  <Card
    title="Consulta Avançada"
    href="/api/endpoints/consultation"
    icon="search"
  >
    Consulte documentos
  </Card>
  <Card
    title="Suporte"
    href="mailto:suporte@managersaas.com"
    icon="message-circle"
  >
    Entre em contato
  </Card>
</CardGroup>

---

❌ **Cancelamento Seguro**: Cancele CT-e OS autorizados de forma segura e controlada. Para dúvidas sobre o processo de cancelamento, consulte nossa equipe de suporte. 