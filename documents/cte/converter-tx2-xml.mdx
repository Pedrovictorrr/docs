---
title: Converter TX2 para XML
description: Documentação da rota para conversão de arquivos TX2 para XML no CT-e OS
---

# Converter TX2 para XML

A rota **Exporta** também pode ser utilizada para executar a simples conversão do arquivo TX2 para XML. Podemos obter o XML convertido com ou sem assinatura.

## Endpoint

### POST

```http
POST https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml
```

## Headers

| Nome | Descrição | Exemplo |
|------|-----------|---------|
| `Content-Type` | Indica o tipo de arquivo | `application/x-www-form-urlencoded` |
| `Authorization` | Este usuário e senha são os seus dados para logar como administrador em um grupo do SaaS | `Basic YWRtaW46MTIzbXVkYXI=` |

## Body Parameters

| Nome | Descrição |
|------|-----------|
| `Grupo` | Nome do grupo |
| `CNPJ` | CNPJ que está vinculado ao grupo que será usado para enviar a requisição de descarte, apenas números |
| `Arquivo` | Conteúdo do TX2 |
| `Converter` | **Define se a rota vai converter o arquivo TX2 em XML, sendo de uso Obrigatório**<br/>`1` - Converter TX2 em XML<br/>`0` - Rota exporta não ativa a função de conversão, voltando ao funcionamento normal |
| `Assinado` | **Define se o XML convertido será assinado ou não**<br/>`1` - XML com Assinatura<br/>`0` - XML sem Assinatura |
| `Url` | **Define o formato de retorno**<br/>`0` - Conteúdo do arquivo XML<br/>`1` - URL para download do arquivo XML |

## Exemplos de Uso

### Exemplo 1: Conversão TX2 para XML sem Assinatura (Conteúdo)

```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=meugrupo&CNPJ=08187168000160&Arquivo=CONTEUDO_DO_TX2&Converter=1&Assinado=0&Url=0"
```

### Exemplo 2: Conversão TX2 para XML com Assinatura (URL de Download)

```bash
curl -X POST "https://managersaas.tecnospeed.com.br:8081/ManagerAPIWeb/cteos/exportaxml" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic YWRtaW46MTIzbXVkYXI=" \
  -d "Grupo=meugrupo&CNPJ=08187168000160&Arquivo=CONTEUDO_DO_TX2&Converter=1&Assinado=1&Url=1"
```

## Respostas

### Exemplo de Retorno com Sucesso

Quando concluído com sucesso será retornado a URL para download do arquivo XML ou conteúdo em bytes de acordo com o valor preenchido no parâmetro `Url`.

#### URL = 0 (Conteúdo do XML)

```xml
<CTeOS versao="3.00" xmlns="http://www.portalfiscal.inf.br/cte">
    <infCte Id="CTe35211223856927000123670730000000051100000270" versao="3.00">
        <!-- Conteúdo do XML convertido -->
    </infCte>
</CTeOS>
```

#### URL = 1 (URL para Download)

```text
http://managersaashom.tecnospeed.com.br:7071/ManagerAPIWeb/download/ManagerCTeOS/43170704086596000145578460000000011000000009.xml
```

### Exemplo de Retorno com Erro

```text
"Palavra Exception", "Classe da Exception", "Mensagem de Exception"
EXCEPTION,EspdAPIWebServerErrorException,Tipo: deve ser informado
```

## Parâmetros Obrigatórios

1. **`Converter`** - Deve ser sempre `1` para ativar a conversão TX2 → XML
2. **`Arquivo`** - Conteúdo do arquivo TX2 que será convertido
3. **`Grupo`** - Nome do grupo configurado no SaaS
4. **`CNPJ`** - CNPJ vinculado ao grupo

## Parâmetros Opcionais

1. **`Assinado`** - Define se o XML será assinado digitalmente
2. **`Url`** - Define o formato de retorno (conteúdo ou URL de download)

## Casos de Uso

### 1. Conversão Simples TX2 → XML
- `Converter=1`
- `Assinado=0` (sem assinatura)
- `Url=0` (retorna conteúdo)

### 2. Conversão com Assinatura Digital
- `Converter=1`
- `Assinado=1` (com assinatura)
- `Url=0` (retorna conteúdo)

### 3. Conversão com Download
- `Converter=1`
- `Assinado=1` (com assinatura)
- `Url=1` (retorna URL para download)

## Observações Importantes

1. **Conversão Obrigatória**: O parâmetro `Converter=1` é obrigatório para ativar a funcionalidade de conversão
2. **Assinatura Digital**: Quando `Assinado=1`, o XML será assinado com o certificado digital configurado
3. **Formato de Retorno**: Use `Url=0` para obter o conteúdo diretamente ou `Url=1` para obter uma URL de download
4. **Arquivo TX2**: O conteúdo do arquivo TX2 deve ser enviado no parâmetro `Arquivo`
5. **Autenticação**: É necessário ter permissões de administrador no grupo especificado

## Tratamento de Erros

### Erros Comuns

- **"Tipo: deve ser informado"** - Verificar se todos os parâmetros obrigatórios foram enviados
- **"Arquivo inválido"** - Verificar se o conteúdo do TX2 está correto
- **"CNPJ não encontrado"** - Verificar se o CNPJ está vinculado ao grupo
- **"Sem permissão"** - Verificar se o usuário tem permissões de administrador

### Validações

1. Verificar se o arquivo TX2 está no formato correto
2. Confirmar se o CNPJ está ativo no grupo
3. Validar se o usuário tem permissões adequadas
4. Verificar se o certificado digital está configurado (quando `Assinado=1`)